#!/bin/bash
#
. i_config

#-------------------------------- Parametros de invocacion ---------------------------------------

	#-----> Proyecto al que pertenece el ITEM
	if [ -n "$toba_proyecto" ]
	then
		#Lo busca en una variable del entorno
		pa_proyecto=$toba_proyecto
	else
		pa_proyecto=toba
	fi

	#-----> Usuario que solicita el ITEM
	if [ -n "$toba_usuario" ]
	then
		#Lo busca en una variable del entorno
		pa_usuario=$toba_usuario
	else
		pa_usuario=toba
	fi

	#-----> Archivo que se utiliza para entrar en el toba
	pa_archivo=$d_php/nucleo/acceso_consola.php

#-------------------------------------------------------------------------------------------------

# Funcionalidad no implementada
###==> 

##***********************************************************************************************##
## HOLA!
##***********************************************************************************************##

if [ "$1" = "hola" ]
then

	echo " objetivo: Realizar peticiones directas al nucleo"

##***********************************************************************************************##
## Ayuda
##***********************************************************************************************##

elif [ "$1" = "ayuda" ]
then

	ayuda $0

##***********************************************************************************************##
## Menu
##***********************************************************************************************##

elif [ "$1" = "menu" ]
then

	item $instancia /consola/menu
	
##***********************************************************************************************##
## Mostrar el punto de ACCESO
##***********************************************************************************************##

elif [ "$1" = "acceso" ]
then

	echo
	echo " Acceso al sistema: $pa_archivo"
	echo

##***********************************************************************************************##
## Ver Cosas Pendientes
##***********************************************************************************************##
elif [ "$1" = "pendiente" ]
then
	pendiente $0

##***********************************************************************************************##
## SOLICITUD
##***********************************************************************************************##
#@ toba [<I>] ITEM [parametros]                -- Genera una SOLICITUD al TOBA en <I>
else
	#Permitir ejecutar items de otros proyecto, notandolo como "proyecto||item" (notar las comillas)
	proyecto=`echo $1 | awk -F'|' '{print $1}'`
	item=`echo $1 | awk -F'|' '{print $3}'`
	if [ "$item" != "" ]
	then
		pa_proyecto=$proyecto
	else
	 	item=$1
	fi
	shift
	php -f $pa_archivo $instancia $pa_usuario $pa_proyecto $item $*			
	controlar "Ejecucion del ITEM" $*
 	
fi
##***********************************************************************************************##
