<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
 <title>Referencia/Eventos - SIU-Toba - Trac</title><link rel="start" href="../../wiki.html" /><link rel="search" href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/search" /><link rel="help" href="../TracGuide.html" /><link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/Referencia/Eventos?format=txt" title="Plain Text" type="text/plain" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}
</style>
 <script type="text/javascript" src="../../chrome/common/js/trac.js"></script>
</head>
<body>


<div id="banner">

<div id="header"><a id="logo" href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/settings">Settings</a></li><li><a href="../TracGuide.html" accesskey="6">Help/Guide</a></li><li class="last"><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/about" accesskey="9">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a href="../../wiki.html" accesskey="1">Wiki</a></li><li><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/timeline" accesskey="2">Timeline</a></li><li><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/roadmap" accesskey="3">Roadmap</a></li><li><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/report">View Tickets</a></li><li class="last"><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/search" accesskey="4">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
  <li><a href="../../wiki.html">Start Page</a></li>
  <li><a href="../TitleIndex.html">Title Index</a></li>
  <li><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/RecentChanges">Recent Changes</a></li>
  
   <li class="last"><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/Referencia/Eventos?action=history">Page History</a></li>
  
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   <div class="wikipage">
    <div id="searchable"><p>
<a href="../WikiStart.html">Inicio</a> / <a href="../Referencia.html">Referencia</a> / Eventos
</p>
<h1 id="Eventos">Eventos</h1>
<p>
Un evento es un suceso que ocurre tanto en los elementos de interface (ei) como en sus contenedores, los controladores de interface (ci). El evento sirve como medio de comunicación del cliente con el servidor, llevando los parámetros particulares del suceso. Cuando en un momento dado uno de los objetos en pantalla pide ir al servidor, el resto de los objetos comunica también sus eventos.
</p>
<h2 id="Tiposdeeventos">Tipos de eventos</h2>
<p>
Los eventos pueden dividirse en dos grandes grupos
</p>
<ul><li>Disparados para atender la pantalla anterior. Por ejemplo el evento generado cuando el usuario pide ordenar un listado
</li><li>Disparados para generar la próxima pantalla. Por ejemplo el evento de carga de datos de una grilla.
</li></ul><h2 id="Cuálessonloseventosexistentes">¿Cuáles son los eventos existentes?</h2>
<p>
Para todos los objetos existe un evento común denominado <i>carga</i> que permite inicializar el objeto con un conjunto de datos específico, este evento se lanza justo antes de construir la interfaz gráfica. Luego, cada <a class="wiki" href="Objetos.html">Objeto</a> posee distintos modelos de eventos disponibles en el editor del mismo. Por ejemplo un ei_formulario tiene dos modelos, uno clásico ABM (cuatro eventos: alta, baja, modificacion y cancelar) y otro básico que sólo incluye la modificación como evento implícito.
</p>
<h2 id="Cómoseescuchaunevento">¿Cómo se escucha un evento?</h2>
<p>
<i>Escuchar</i> un evento es definir un método en el <a class="wiki" href="Objetos/ci.html">Controlador de Interface</a> que lo contiene, este será invocado cuando el suceso ocurre. El nombre de este método necesita estar definido con el prefijo <tt>evt__</tt> seguido por el id del objeto origen, con el nombre de evento como sufijo <tt>__evento</tt>. Por ejemplo en el caso de un alta en un formulario <i>id_formulario</i> se dispara el evento <i>alta</i>, y se puede escuchar desde su contenedor definiendo el siguiente método:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__id_formulario__alta</span><span class="code-keyword">(</span><span class="code-lang">$registro</span><span class="code-keyword">)
    {
        </span><span class="code-comment">//Código que reacciona al evento
    </span><span class="code-keyword">}
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><p>
En caso de que este método no sea definido, el evento queda sin atrapar, informándose en el <a class="missing wiki" href="Logging.html" rel="nofollow">log por pantalla?</a>. Cuando el evento es lanzado por el mismo CI, el id del objeto origen es omitido, por ejemplo el evento <i>procesar</i> del CI se escucha de la siguiente manera:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__procesar</span><span class="code-keyword">()
    {
        </span><span class="code-comment">//Código que reacciona al evento
    </span><span class="code-keyword">}
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><h2 id="Cómoselanzaunevento">¿Cómo se lanza un evento?</h2>
<p>
Los eventos tienen una forma general de lanzarse a través de un botón que el usuario debe clickear explícitamente. Otros más particulares se lanzan a partir de una imagen (por ejemplo el ordenamiento de un <a class="wiki" href="Objetos/ei_cuadro.html">cuadro</a>), con el cambio de solapa en un <a class="missing wiki" href="Objetos/ci_me_tab.html" rel="nofollow">ci con tabs?</a> o implícitamente en la construcción de la interface, como el evento <i>carga</i>.<br />
De todos los eventos de un objeto, uno puede estar definido como <i>implícito</i>. Un evento por implícito será lanzado en caso de que ningún evento sea disparado por el usuario. Un ejemplo clásico es un formulario sin botones que siempre lanza el evento <i>modificacion</i>. Es posible cambiar el evento por defecto desde el editor de objetos (recomendado), o en ejecución desde el CI, en caso de que dependa de una condición dinámica:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    $this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dependencia</span><span class="code-keyword">(</span><span class="code-string">'formulario'</span><span class="code-keyword">)-&gt;</span><span class="code-lang">set_evento_defecto</span><span class="code-keyword">(</span><span class="code-string">'alta'</span><span class="code-keyword">);
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><h2 id="ListadeEventospersonalizados">Lista de Eventos personalizados</h2>
<p>
Cuando la ocurrencia de un evento depende de condiciones en ejecución se recomienda redefinir el método get_lista_eventos para sacar el evento según las circunstancias:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">get_lista_eventos</span><span class="code-keyword">()
    {
        </span><span class="code-lang">$eventos </span><span class="code-keyword">= </span><span class="code-lang">parent</span><span class="code-keyword">::</span><span class="code-lang">get_lista_eventos</span><span class="code-keyword">();
        if (</span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">condicion</span><span class="code-keyword">) {
            unset(</span><span class="code-lang">$eventos</span><span class="code-keyword">[</span><span class="code-string">'evento_1'</span><span class="code-keyword">]);
        } else {
            unset(</span><span class="code-lang">$eventos</span><span class="code-keyword">[</span><span class="code-string">'evento_2'</span><span class="code-keyword">]);
        }
        return </span><span class="code-lang">$eventos</span><span class="code-keyword">;
    }
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><h2 id="Propiedades">Propiedades</h2>
<ul><li><strong>Identificador</strong>: nombre lógico del evento, determina la forma que toman los listeners.
</li><li><strong>Etiqueta</strong>: Es el nombre a nivel de usuario del evento, este nombre será el label del botón si se define en botonera.
</li><li><strong>Imagen</strong>: Omagen que se muestra, sólo aplica a objetos que renderizen el evento como imagen. En el caso de se muestren como botones se antepone la imagen al texto del botón.
</li><li><strong>Implícito</strong>: Un evento implícito se lanza cuando ningún evento se selecciona por el usuario, útil cuando se quiere brindar comportamientos por defecto.
</li><li><strong>En botonera</strong>: El evento se muestra como botón en el área de botonera del objeto.
</li><li><strong>Estilo</strong>: Clase css asociada al componente gráfico que muestra el disparador del evento.
</li><li><strong>Confirmación</strong>: Indica si el evento necesita una confirmación explícita del usuario para lanzarse. Es común encontrarlo en eliminaciones, en caso de no querer la confirmación dejarla vacía.
</li><li><strong>Ayuda</strong> (string): Descripción del significado del evento. Generalmente se muestra como tooltip.
</li><li><strong>Sobre Fila</strong>: Propiedad que sólo entienden aquellos objetos con múltiples filas (por ejemplo el <a class="wiki" href="Objetos/ei_cuadro.html">cuadro</a> o el <a class="wiki" href="Objetos/ei_formulario_ml.html">formulario mulilínea</a> e indica que el evento opera sobre una única fila y no sobre todo el conjunto de datos.
</li><li><strong>Maneja datos</strong>: Indica si el evento depende de los datos cargados, esto condiciona la validación del objeto. Por ejemplo el evento <i>cancelar</i> no maneja_datos por lo que no es necesario validarlo, lo mismo sucede al <i>borrar</i>, en cambio el <i>alta</i> o la <i>modificacion</i> sí manejan datos y requieren validación.
</li><li><strong>Grupos</strong>: Grupos de eventos a los que pertenece el evento en cuestion, se pueden definir varios separandolos por coma. La conveniencia de esta funcionalidad es activar y desactivar conjuntos de eventos. Existe un metodo en el ancestro de los componentes de tipo 'Elemento de Interfaz' ( set_grupo_eventos_activo($nombre_grupo) ) que permite setear el grupo activo en tiempo de ejecución. Los componentes <a class="wiki" href="Objetos/ei_formulario.html">ei_formulario</a> y <a class="wiki" href="Objetos/ei_formulario.html">ei_filtro</a> poseen un comportamiento predefinido respecto de este tema: 
<ul><li>Cuando se inicializa el elemento en se establece al grupo 'no_cargado' como activo.
</li><li>Si se llama al metodo cargar_datos() del mismo (este metodo es llamado por el toba cuando se crea define un metodo de carga de datos para un componente) se establece el grupo 'cargado' como activo.
</li></ul></li></ul><blockquote>
<p>
Esta funcionalidad permite definir el comportamiento deseado en algunas aplicaciones comunes del formulario, como el ABM simple (Cuando el formulario esta vacio muestra un boton 'Agregar', si se le cargaron datos muestra los botones 'Modificacion', 'Baja' y 'Cancelar') y tambien el comportamiento normal de un filtro (Cuando se encuentra vacio muestra un boton 'filtrar' y cuando esta cargado un boton 'filtrar' y otro 'cancelar').
</p>
</blockquote>
</div>
   </div>
   
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"));
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/Referencia/Eventos?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.com/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/about"><strong>Trac 0.9.2</strong></a><br />
  By <a href="../../../../external.html?link=http://www.edgewall.com/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por el Programa SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>



 </body>
</html>

