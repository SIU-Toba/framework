<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
 <title>Referencia/AbrirPhp - SIU-Toba - Trac</title><link rel="start" href="../../wiki.html" /><link rel="search" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/search" /><link rel="help" href="../TracGuide.html" /><link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/wiki/Referencia/AbrirPhp?format=txt" title="Plain Text" type="text/x-trac-wiki" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}

/* trac php syntax highlighting */
.code-block {
    line-height: 1em;
    font-family: Courier, monotype;
    font-size: 12px;
    }
.h_question { color: #0000BB; } /* highlight.default */
.hphp_commentline { color: #FF8000; } /* highlight.comment */
.hphp_operator { color: #007700; } /* highlight.keyword */
.hphp_word { color: #007700; } /* highlight.keyword */
.hphp_default {}
.hphp_variable { color: #0000BB; } /* highlight.default */
.hphp_hstring { color: #DD0000; } /* highlight.string */
.hphp_simplestring { color: #DD0000; } /* highlight.string */
.h_tagunknown {}
.h_default {}

.code-keyword { color: #007700; font-weight: normal; }
.code-lang { color: #0000BB; font-weight: normal; }
.code-comment { color: #FF8000; font-weight: normal;}
.code-string { color: #DD0000; font-weight: normal;}

pre { padding:0; margin: 0}

.tablas-screenshots td:first-child { background-color: #D5CECD; width: 30%}
.tablas-screenshots table { width: 90%; border: 1px solid gray; }
.tablas-screenshots td { }
.tablas-screenshots table.wiki td { border: 1px solid gray; }

#tkt-changes-hdr {
    clear: both;
    padding-top: 30px;
}
.wiki-toc {
    clear: right;
    min-width: 160px;
    background-color:#F7F7F7;    
    border: 1px solid #D7D7D7;
}
.wiki-toc .active {
    background-color: #890C71;
    padding: 1px;
}
.wiki-toc .active a {
    color:white; 
}
.wiki-toc .active a:hover {
    background-color:  #890C71;
}
.indice-general {
/*    background-color: #FFFFDD;*/
}
.wikipage h1 {
    padding-top: 5px;
}
.wikipage h2 {
 padding: 2px;
}
.wikipage h1 {
    font-size: 28px;
}
.wikipage h2 {
    background-color: #890C71;
    color: white;
    padding-left: 10px;
    margin-top: 30px;
    font-size: 100%;
    border: 1px solid gray;
}
.wikipage h3 {
    font-size:100%;
}
li {
    margin-bottom:4px;
}
li * {
    margin-bottom:0;
}
/*a {
 color: #890C71;
}*/
@media print {
 .wiki-toc { display: none }
}
#tkt-changes-hdr, .tkt-chg-list { 
    font-size:80%;
    text-align:right;
}

</style>
 <script type="text/javascript" src="../../chrome/common/js/trac.js"></script>
</head>

			<body>
			<table border='0' cellspacing='0' cellpadding='0' height='48' width='100%'>
			  <tr>
			
				<td class='header-top-left'><img src='../../../../../api/media/logo.png' border='0'/></td>
			    <td class='header-top-right'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/wiki.png' />
			    	<a href='../../../../../api/index.html'  title='Navegar hacia la documentación PHP'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/php-small.png' /></a> 
			    	<a href='../../../../../api_js/index.html'  title='Navegar hacia la documentación Javascript'>    		
			    	<img border='0' style='vertical-align: middle' src='../../../../../api/media/javascript-small.png' /></a>
			  </tr>
			
			  <tr>
			    <td colspan='2' class='header-menu'>
			  		  [ <a href='http://desarrollos.siu.edu.ar/trac/toba/wiki/Referencia/AbrirPhp' title='El sitio online contiene contenidos mas detallados y actualizados'
						class='menu'>Ver online</a> ]
			    </td>
			
			  </tr>
			  <tr><td colspan='2' class='header-line'><img src='../../../../../api/media/empty.png' width='1' height='1' border='0' alt=''  /></td></tr>
			</table>
		


<div id="banner">

<div id="header"><a id="logo" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/settings">Settings</a></li><li><a accesskey="6" href="../TracGuide.html">Help/Guide</a></li><li class="last"><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/about">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a accesskey="1" href="../../wiki.html">Wiki</a></li><li><a accesskey="2" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/timeline">Timeline</a></li><li><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li class="last"><a accesskey="4" href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/search">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
   <li><a href="../../wiki.html">Start Page</a></li>
   <li><a href="../TitleIndex.html">Index by Title</a></li>
   <li><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/wiki/RecentChanges">Index by Date</a></li>
   <li class="last"><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/wiki/Referencia/AbrirPhp?action=diff&amp;version=21">Last Change</a></li>
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   
   <div class="wikipage">
    <div id="searchable"><h1 id="AbrirunarchivoPHPenuneditorexterno">Abrir un archivo PHP en un editor externo</h1>
<p>
Abrir un archivo en el sistema de ventanas del sistema operativo desde un servidor web tiene algunas complicaciones:
</p>
<ul><li>Generalmente apache corre usando un usuario especial y como php corre adentro de este, todo proceso disparado desde php se abre utilizando el usuario de Apace (generalmente Local Service en windows o www-data en linux), por lo que es probable que no se tomen las configuraciones del usuario de escritorio.
</li><li>Apache corre en background como servicio por lo que no es directo hacer que abra un proceso en el sistema de ventanas
</li></ul><h2 id="Windows">Windows</h2>
<p>
Sistemas probados: Windows XP SP2 y Windows 2003 con Apache2
Por defecto en la configuración se ejecuta un <tt>start nombre_archivo</tt> y dependiendo de las configuraciones actuales se abre el editor predeterminado. Es posible personalizar el comando cambiando la entrada <strong>editor_php</strong> del archivo <i>instalacion.ini</i>.
</p>
<h3 id="Conservandoelusuariodelservicio">Conservando el usuario del servicio</h3>
<p>
Configurar apache para que pueda abrir procesos de escritorio:
</p>
<ul><li>Parar el servicio
</li><li>Ir a las propiedades del servicio Apache2, solapa 'Log On' y activar la opción 'Allow service to interact with desktop'.
</li><li>Iniciar el servicio
</li></ul><p>
Como apache corre con un usuario aparte (Local service por defecto) el editor se abre utilizando este usuario, por lo que si el editor soporta el esquema de multiples usuarios tendrá sus configuraciones particulares y abrira una instancia nueva del editor. Por lo general funciona de la siguiente forma:
</p>
<ul><li>Cuando no hay un editor abierto y se pide abrir el archivo se inicia un editor con el usuario 'Local Service'
</li><li>Cuando hay un editor abierto (con el usuario deseado) y se pide abrir el archivo se reutiliza el editor permaneciendo el usuario.
</li></ul><p>
Para cambiar la asociación de la extensión php con el usuario actual es posible cambiarlo en la registry en la entrada <tt>[HKEY_CLASSES_ROOT\php_auto_file\shell\open\command]</tt> <a class="attachment" href="../../attachment/wiki/Referencia/AbrirPhp/abrir_archivo_php.html" title="Attachment Referencia/AbrirPhp: abrir_archivo_php.reg">attachment:"abrir_archivo_php.reg"</a>
</p>
<h3 id="Cambiandoelusuario">Cambiando el usuario</h3>
<p>
Si se desea que el editor utilice el usuario propio, se deberá setear el servicio para que se loguee con esos datos como se ve en la siguiente pantalla para un usuario "Administrator":
</p>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Referencia/AbrirPhp/servicio_apache.html"><img width="417" style="float:center" src="../../attachment/wiki/Referencia/AbrirPhp/servicio_apache41f0.png?format=raw" /></a>
</p>
<h2 id="Linux">Linux</h2>
<ul><li>Sistemas probados: Debian con KDE, Kubuntu y Ubuntu 7.04
</li><li>Primero hay que permitir que un proceso externo pueda abrir algo en el sistema de ventanas, para eso abrir una consola y ejecutar <tt>xhost +</tt>, esto seguramente deja alguna ventana abierta de seguridad (no fue necesario con kubuntu, si con debian).
</li><li>Una posible solución al problema de los usuarios es hacer que apache corra con el usuario de escritorio, cambiando el user y group en <tt>/etc/apache2/apache2.conf</tt> dependiendo de la instalación. Parar e iniciar el servicio (hacer stop-start o force-reload), confirmando con <tt>ps aux | grep apache</tt> que apache se ejecuta con el usuario de escritorio. Cuando esto ocurre el usuario del escritorio no tiene permisos de escribir en el directorio donde se alojan las sesiones, cambiar con:
<pre class="wiki">sudo chown nombre_usuario /var/lib/php5 -R
</pre></li></ul><p>
Luego recordar de cambiar los permisos en el directorio de logs de toba (si es que se utilizan) ya que el nuevo usuario con el que corre apache perdera los mismos.
</p>
<ul><li>Crear un script ejecutable que tome el archivo como parámetro y lo abra con el editor preferido.
<pre class="wiki">sudo editor /usr/bin/abrir_php
#Editar y salvar archivo
sudo chmod +x /usr/bin/abrir_php
</pre><ul><li>Para KDE
<pre class="wiki">export HOME=/home/nombre_usuario;
export DISPLAY=:0.0;
kfmclient exec "$1"
</pre><ul><li>Para GNOME
<pre class="wiki">export HOME=/home/nombre_usuario;
export DISPLAY=:0.0;
gnome-open "$1"
</pre></li></ul></li></ul></li><li>Cambiar en el archivo instalacion.ini la entrada <strong>editor_php</strong> por el nombre del ejecutable que dispara la apertura del archivo, en nuestro caso <tt>/usr/bin/abrir_php</tt>
</li></ul></div>
   </div>
   
    <h3 id="tkt-changes-hdr">Attachments</h3>
    <ul class="tkt-chg-list"><li class="tkt-chg-change"><a href="../../attachment/wiki/Referencia/AbrirPhp/servicio_apache.html">servicio_apache.png</a> (30.5 kB) - added by andres on 10/31/06 16:47:42.</li><li class="tkt-chg-change"><a href="../../attachment/wiki/Referencia/AbrirPhp/abrir_archivo_php.html">abrir_archivo_php.reg</a> (328 bytes) -<q>Entrada de la registry que permite cambiar el editor por defecto para un archivo .php</q>, added by seba on 05/07/07 18:52:27.</li>
    </ul>
  
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/wiki/Referencia/AbrirPhp?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../../external.html?link=https://desarrollos.siu.edu.ar/trac/toba/about"><strong>Trac 0.10.3</strong></a><br />
  By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por el SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>



 </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>

