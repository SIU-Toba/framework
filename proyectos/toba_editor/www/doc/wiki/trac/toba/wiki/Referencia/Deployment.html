<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="../../../../external.html?link=http://www.w3.org/1999/xhtml">
  
  

  


  

  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
      Referencia/Deployment – SIU-Toba
    </title>
        <link rel="search" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/Deployment?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="up" href="../Referencia.html" title="View parent page" />
        <link rel="start" href="../../wiki.html" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search/opensearch" title="Search SIU-Toba" />
    <script type="text/javascript" src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/toba/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    <script type="text/javascript" src="../../chrome/site/mootools.js"></script>
    <script type="text/javascript" src="../../chrome/site/slimbox.js"></script>
    <link rel="stylesheet" href="../../chrome/site/portada.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../chrome/site/slimbox.css" type="text/css" media="screen" />
    <a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a>
    <link rel="stylesheet" type="text/css" href="../../chrome/site/style.css" />
  </head>
  <body>
<a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu_original.gif" width="282" height="90" alt="SIU-Toba" /></a>
    <div id="siteheader">
    </div>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" alt="Toba" height="90" width="282" /></a>
      </div>
      <form id="search" action="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../TracGuide.html">Help/Guide</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about">About Trac</a></li><li class="last"><a href="../../prefs.html">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../../wiki.html">Wiki</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline">Timeline</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/roadmap">Roadmap</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/query">View Tickets</a></li><li class="last"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../Referencia.html">Up</a></li><li><a href="../WikiStart.html">Start Page</a> / <a href="../Referencia.html">Referencia</a> / Deployment</li><li><a href="../TitleIndex.html">Index</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/Deployment?action=history">History</a></li><li class="last"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/Deployment?action=diff&amp;version=50">Last Change</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View Referencia" href="../Referencia.html">Referencia</a><span class="pathentry sep">/</span><a class="pathentry" title="View Referencia/Deployment" href="Deployment.html">Deployment</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="Casosdeusodedeployment">Casos de uso de deployment</h1>
<p>
Los siguientes escenarios asumen la existencia de un control de versiones para el proyecto e instalaciones remotas.
</p>
<h2 id="Desarrolloenequipo">Desarrollo en equipo</h2>
<p>
Cuando trabajamos en equipo con la herramienta , cada puesto de desarrollador que tenga su <a class="wiki" href="Instancia.html">propia base de metadatos</a> debe definir un <a class="wiki" href="CelulaDesarrollo.html">Id. de desarrollo</a> único en el grupo, creando un namespace para la creación de nuevos componentes. Ej. si tengo un id_desarrollo 35 los las nuevas definiciones que arme van a comenzar en 35.000.0000. Una vez acordado y configurado esto correctamente, en el día a día de desarrollo se debe realizar los siguientes pasos para no corromper los metadatos ni descartar cambios de compañeros:
</p>
<ol><li>Antes de realizar una actualización vía svn (<tt>svn update</tt>), si he realizado algún cambio de metadatos en mi instancia debo exportarlos al sistema de archivos:
<pre class="wiki">toba proyecto exportar -p mi_proyecto
</pre></li><li>Si luego de actualizar el proyecto (<tt>svn update</tt>) se actualizan archivos en la carpeta <i>metadatos</i>, indica que alguien del equipo subio cambios sobre componentes,operaciones, etc. Antes de empezar la edición debo regenerar el proyecto para tomar esos cambios:
<pre class="wiki">toba proyecto regenerar -p mi_proyecto
</pre></li></ol><p>
Una forma alternativa de tener estos tres pasos (proyecto exportar - svn update - proyecto regenerar) es usar el siguiente comando
</p>
<pre class="wiki">toba proyecto actualizar -p mi_proyecto
</pre><p>
Tener en cuenta de siempre monitorear la salida de este comando, especialmente cuando ejecuta el <tt>svn update</tt> ya que si ocurre algún error (ej. no esta autenticado, no existe el comando) o ocurre un <a class="ext-link" href="../../../../external.html?link=http://svnbook.red-bean.com/nightly/en/svn.tour.cycle.html#svn.tour.cycle.resolve"><span class="icon"> </span>conflicto</a>.
</p>
<p>
Luego de tomar los cambios del resto del equipo y trabajar sobre el proyecto debemos subir nuestros cambios al repositorio. Para que se suban los metadatos modificados debo antes exportarlos:
</p>
<pre class="wiki">toba proyecto exportar -p mi_proyecto
</pre><p>
Entonces resumiendo debemos siempre sincronizar metadatos del sistema de archivos (carpeta metadatos, son lo que en definitiva se guardan en el svn y se lanzan con la version) con los metadatos <strong>vivos</strong> de la instancia (aquellos que podemos editar usando toba_editor). Cuando actualizamos los 1eros (svn update) debemos regenerar los 2dos (proyecto regenerar). Cuando cambiamos los 2dos (toba_editor) y queremos subirlos al svn (svn commit) debemos antes exportarlos (proyecto exportar).
</p>
<h2 id="PasajeDesarrollo-Producciónusandoinstaladorgráfico">Pasaje Desarrollo - Producción (usando instalador gráfico)</h2>
<p>
Ver <strong><a class="wiki" href="Instalador.html">Generación del paquete</a></strong> de instalación para producción
</p>
<h2 id="PasajeDesarrollo-Producciónmanual">Pasaje Desarrollo - Producción (manual)</h2>
<p>
El escenario más común es tener una única instancia de desarrollo y actualizar otra instancia (generalmente Producción o Testing) de manera periódica. Este escenario puede describirse en cinco pasos:
</p>
<p>
<a style="padding:0; border:none" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/attachment/wiki/Referencia/Deployment/desarrollo_produccion.png"><img src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/raw-attachment/wiki/Referencia/Deployment/desarrollo_produccion.png" /></a>
</p>
<ol><li><i>Desarrollo</i> - Exportación de metadatos: Siempre en desarrollo los últimos metadatos se encuentran en la base de datos (la instancia) y no en el sistema de archivos, esto es lógico porque los desarrolladores estuvieron utilizando el Editor en forma conjunta con esta instancia. La exportación se hace de la siguiente forma:
<pre class="wiki">toba proyecto exportar -p mi_proyecto
</pre></li><li><i>Desarrollo</i> - Commit de los nuevos archivos: El resultado de la exportación es la actualización de los archivos ubicados en la carpeta <i>metadatos</i> del proyecto. Junto a las modificaciones de código existentes se suben las modificaciones (commit) creando una nueva revisión, almacenada en un repositorio central.
</li><li><i>Producción</i> - Actualización de la nueva revisión: Suponiendo que se toma la decisión de actualizar el sistema en producción, el primer paso es actualizar el proyecto en cuestión, esto traerá los metadatos y el código actualizado.
</li><li><i>Producción</i> - Exportación de información local: Lo único que se necesita de la instancia en producción son sus usuarios, logs y demás metadatos considerados locales o propios de la instancia, para el resto de los metadatos valen los de desarrollo. Entonces es necesario exportar los datos locales de esta instancia almacenándose en el sistema de archivos:
<pre class="wiki">toba instancia exportar_local
</pre></li><li><i>Producción</i> - Regenerar el proyecto: Ahora que tanto los metadatos de desarrollo como los de los usuarios se encuentran en el sistema de archivos es posible regenerar el proyecto:
<pre class="wiki">toba proyecto regenerar -p mi_proyecto
</pre></li></ol><h2 id="PasajeDesarrollo-Producciónincluyendousuarios">Pasaje Desarrollo - Producción (incluyendo usuarios)</h2>
<ol><li><i>Desarrollo</i> - Exportación de metadatos: Siempre en desarrollo los últimos metadatos se encuentran en la base de datos (la instancia) y no en el sistema de archivos, esto es lógico porque los desarrolladores estuvieron utilizando el Editor en forma conjunta con esta instancia. La exportación se hace de la siguiente forma:
<pre class="wiki">toba proyecto exportar -p mi_proyecto
</pre></li><li><i>Desarrollo</i> - Commit de los nuevos archivos: El resultado de la exportación es la actualización de los archivos ubicados en la carpeta <i>metadatos</i> del proyecto. Junto a las modificaciones de código existentes se suben las modificaciones (commit) creando una nueva revisión, almacenada en un repositorio central.
</li><li><i>Desarrollo</i> - Copiar la carpeta <tt>toba/instalacion/i__&lt;instancia&gt;</tt> a producción. Esta carpeta contiene las .sql de los usuarios y como se vinculan al proyecto. Además contiene los logs de acceso y de aplicación, pueden borrarse estos archivos para no pasar el historial de desarrollo.
</li><li><i>Producción</i> - Actualización de la nueva revisión: El primer paso es actualizar el proyecto en cuestión, esto traerá los metadatos y el código actualizado.
</li><li><i>Producción</i> - Regenerar la instancia: Ahora que tanto los metadatos de desarrollo como los de los usuarios se encuentran en el sistema de archivos es posible regenerar la instancia. Ante la pregunta <i>Desea EXPORTAR antes la informacion local de la INSTANCIA?</i> responder NO, sino se perderá la información de usuarios traida desde desarrollo:
<pre class="wiki">toba instancia regenerar
</pre></li></ol><h2 id="ActualizacióndeToba">Actualización de Toba</h2>
<p>
Muchas veces es necesario actualizar la versión de toba con la que se está desarrollando (arreglo de bugs, nuevas funcionalidades deseadas, etc.), para esto hay que tener el cuidado de exportar los metadatos previo a la actualización, ya que actualizar toba muchas veces (no todas) implica regenerar la instancia.
</p>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Referencia/Deployment/actualizacion_toba.html"><img src="../../raw-attachment/wiki/Referencia/Deployment/actualizacion_toba.png" /></a>
</p>
<ol><li>Exportar Metadatos del proyecto: Como los últimos metadatos se encuentran en la base de datos (la instancia) es necesario llevarlas al sistema de archivos y <strong>versionarlos</strong>. Para cada proyecto propio ubicado en esta instancia se debe hacer:
<pre class="wiki">toba proyecto exportar -p mi_proyecto
</pre></li><li>Actualizar Toba: Se actualiza la nueva revisión de Toba desde el repositorio SVN.
</li><li>Actualización de metadatos: Es posible que la nueva versión requiera alguna migración automática (ver <a class="wiki" href="../Versiones.html">Versiones Toba</a>), para ello ejecutar:
<pre class="wiki">toba instalacion migrar
</pre></li></ol><p>
Por si la migración afecta algún metadato del proyecto es necesario volver a exportar al sistema de archivos:
</p>
<pre class="wiki">toba proyecto exportar -p mi_proyecto
</pre><p>
Con los nuevos metadatos de toba y los metadatos exportados del proyecto en el sistema de archivos es necesario volver a cargar la instancia:
</p>
<pre class="wiki">toba instancia regenerar
</pre><p>
Cabe notar que <tt>instancia regenerar</tt> como primer paso borra el contenido de la base, por lo que si la exportación no se efectuó o se efectuó con errores se perderán los datos del proyecto y sólo será posible recuperarlos desde alguna revisión del SVN del proyecto o algún backup manual.
</p>
<p>
Hay una razón por la cual la exportación se debe hacer antes que la actualización de código. Es posible que el nuevo código de toba haga referencia a nuevas columnas o nuevos campos no presentes en la instancia actual del proyecto (porque fue creada usando un toba más viejo). Si se quiere hacer la exportación luego de la actualización, este nuevo código va a querer exportar esta estructura de base de datos nueva no presente en la instancia actual, imposibilitando la extracción de los metadatos hacia el sistema de archivos. Hay una solución a este error, siempre y cuando no se haya ejecutado el tercer paso por la razón explicada en el párrafo anterior. La solución es volver atrás la revisión de toba a la misma con la que se generó la instancia y reiniciar el proceso.
</p>
<h2 id="MúltiplesInstalaciones">Múltiples Instalaciones</h2>
<p>
Para tener mútliples instalaciones de Toba en una misma máquina se deben tener en cuenta ciertas pautas adicionales a las básicas descriptas del proceso de <a class="wiki" href="../Instalacion.html">Instalación</a>.
</p>
<ul><li>En el include_path de PHP no debe estar incluído ninguna referencia a alguno de los toba instalados.
</li></ul><ul><li>Para ejecutar scripts administrativos (del tipo instancia o proyecto, por ejemplo) vamos a necesitar previamente agregar al path la ubicación de los mismos, además de setear el valor de las variables de entorno $toba_dir y $toba_instancia. El detalle de cómo crear estos ambientes se encuentra en la <a class="wiki" href="Consola.html">configuración de la consola</a>.
</li></ul><ul><li>Además de tener varias carpetas conteniendo las diferentes versiones de Toba, vamos a configurar igual cantidad de alias para el framework.
</li></ul>
        
        
      </div>
          <h3>Attachments</h3>
          <ul>
              <li>
      <a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/attachment/wiki/Referencia/Deployment/desarrollo_produccion.png" title="View attachment">desarrollo_produccion.png</a>
      <a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/raw-attachment/wiki/Referencia/Deployment/desarrollo_produccion.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="31114 bytes">30.4 KB</span>) - added by <em>seba</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2005-07-14T14%3A40%3A32-0300&amp;precision=second" title="2005-07-14T14:40:32-0300 in Timeline">5 years</a> ago.
              </li>
              <li>
      <a href="../../attachment/wiki/Referencia/Deployment/actualizacion_toba.html" title="View attachment">actualizacion_toba.png</a>
      <a href="../../raw-attachment/wiki/Referencia/Deployment/actualizacion_toba.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="14841 bytes">14.5 KB</span>) - added by <em>seba</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2005-07-14T16%3A01%3A09-0300&amp;precision=second" title="2005-07-14T16:01:09-0300 in Timeline">5 years</a> ago.
              </li>
          </ul>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/Deployment?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about"><strong>Trac 0.11.7</strong></a><br />
        By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Creado por SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a></p>
    </div>
    <div id="sitefooter">
    </div>
<script type="text/javascript">
if (document.getElementById('link_php')) {
document.getElementById('link_php').onclick = function() {
    location.href = '../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api/index.html';
    return false;
}
document.getElementById('link_js').onclick = function() {
    location.href = '../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api_js/index.html';
    return false;
}
document.getElementById('link_wiki').onclick = function() {
    location.href = '../Referencia.html';
    return false;
}
}
</script>
  </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>