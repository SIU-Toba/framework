<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="../../../../../external.html?link=http://www.w3.org/1999/xhtml">
  
  

  


  

  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
      Referencia/FuenteDatos/ParseoErrores – SIU-Toba
    </title>
        <link rel="search" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" />
        <link rel="help" href="../../TracGuide.html" />
        <link rel="alternate" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/FuenteDatos/ParseoErrores?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="up" href="../FuenteDatos.html" title="View parent page" />
        <link rel="start" href="../../../wiki.html" />
        <link rel="stylesheet" href="../../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search/opensearch" title="Search SIU-Toba" />
    <script type="text/javascript" src="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/toba/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    <script type="text/javascript" src="../../../chrome/site/mootools.js"></script>
    <script type="text/javascript" src="../../../chrome/site/slimbox.js"></script>
    <link rel="stylesheet" href="../../../chrome/site/portada.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../chrome/site/slimbox.css" type="text/css" media="screen" />
    <a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a>
    <link rel="stylesheet" type="text/css" href="../../../chrome/site/style.css" />
  </head>
  <body>
<a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../../chrome/site/logo_toba_siu_original.gif" width="282" height="90" alt="SIU-Toba" /></a>
    <div id="siteheader">
    </div>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../../chrome/site/logo_toba_siu.gif" alt="Toba" height="90" width="282" /></a>
      </div>
      <form id="search" action="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../../TracGuide.html">Help/Guide</a></li><li><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about">About Trac</a></li><li class="last"><a href="../../../prefs.html">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../../../wiki.html">Wiki</a></li><li><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline">Timeline</a></li><li><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/roadmap">Roadmap</a></li><li><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/query">View Tickets</a></li><li class="last"><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../FuenteDatos.html">Up</a></li><li><a href="../../WikiStart.html">Start Page</a> / <a href="../../Referencia.html">Referencia</a> / <a href="../FuenteDatos.html">FuenteDatos</a> / ParseoErrores</li><li><a href="../../TitleIndex.html">Index</a></li><li><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/FuenteDatos/ParseoErrores?action=history">History</a></li><li class="last"><a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/FuenteDatos/ParseoErrores?action=diff&amp;version=1">Last Change</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View Referencia" href="../../Referencia.html">Referencia</a><span class="pathentry sep">/</span><a class="pathentry" title="View Referencia/FuenteDatos" href="../FuenteDatos.html">FuenteDatos</a><span class="pathentry sep">/</span><a class="pathentry" title="View Referencia/FuenteDatos/ParseoErrores" href="ParseoErrores.html">ParseoErrores</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="ParseodeMensajesdeError">Parseo de Mensajes de Error</h1>
<h2 id="Funcionamiento">Funcionamiento</h2>
<p>
Este esquema trabaja recuperando los metadatos de tablas/campos agregados la base de datos y luego armando un mensaje que trate de ser más comprensible para el usuario final de la aplicación.
Para ello es importante:
</p>
<ul><li>Definir comentarios para cada campo, tabla, pk y fk de la base de negocio. Si el comentario no existe entonces se utilizará directamente el nombre del elemento en cuestión. Los comentarios se definen mediante el uso de alguna herramienta CASE (ej. pgadmin3) o mediante el comando:
<pre class="wiki">"COMMENT ON COLUMN tabla_x.campo_x IS 'comentario';"
</pre></li></ul><ul><li>Definir un método para cada sql_state que se quiera capturar. Estos metodos deberan devolver el mensaje parseado para ser mostrado al cliente. Ej de definición: 
<pre class="wiki">    function parsear_sqlstate_23503($accion, $sql, $mensaje)
</pre></li></ul><p>
Adicionalmente se pueden definir metodos auxiliares a este:
</p>
<ul><li>Definir un método que armara el mensaje en cuestión uniendo todos los trozos.
</li><li>Definir un método que recupere los datos de los comentarios para los objetos involucrados.
</li></ul><p>
Es importante notar que el manejador de errores usa una conexión alternativa a la base de datos y no la conexión principal sobre la que opera el sistema.
</p>
<h2 id="Activación">Activación</h2>
<p>
El parseo de los mensajes de error se puede activar de dos maneras distintas a partir de Toba <strong>1.4.0</strong>:
</p>
<ul><li>Haciendo uso del check <i>Parsea Errores</i> dentro del Editor de <a class="wiki" href="../FuenteDatos.html">fuentes de datos</a>
</li></ul><p>
<a style="padding:0; border:none" href="../../../attachment/wiki/Referencia/FuenteDatos/ParseoErrores/fuente_parsea_errores.html"><img src="../../../raw-attachment/wiki/Referencia/FuenteDatos/ParseoErrores/fuente_parsea_errores.png" /></a>
</p>
<ul><li>Activándolo manualmente desde una subclase definida para la fuente de datos en cuestión:
</li></ul><div class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">toba_referencia_fuente_datos</span> <span class="k">extends</span> <span class="nx">toba_fuente_datos</span>
<span class="p">{</span>
    <span class="sd">/**
    *   Antes de conectarse a la base de datos, le digo que la misma posee esquema de auditoría
        *       De esta forma se creará automáticamente la tabla temporal y se asignará el usuario.
    */</span>
    <span class="k">function</span> <span class="nf">pre_conectar</span><span class="p">()</span>
    <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_fuente_parsea_errores</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x">
</span></pre></div>
        
        
      </div>
          <h3>Attachments</h3>
          <ul>
              <li>
      <a href="../../../attachment/wiki/Referencia/FuenteDatos/ParseoErrores/fuente_parsea_errores.html" title="View attachment">fuente_parsea_errores.png</a>
      <a href="../../../raw-attachment/wiki/Referencia/FuenteDatos/ParseoErrores/fuente_parsea_errores.png" title="Download" class="trac-rawlink"><img src="../../../chrome/common/download.png" alt="Download" /></a>
      (<span title="5679 bytes">5.5 KB</span>) - added by <em>seba</em>
      <a class="timeline" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2009-06-26T14%3A41%3A54-0300&amp;precision=second" title="2009-06-26T14:41:54-0300 in Timeline">17 months</a> ago.
              </li>
          </ul>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("../../../pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/FuenteDatos/ParseoErrores?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="../../../../../external.html?link=http://trac.edgewall.org/"><img src="../../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about"><strong>Trac 0.11.7</strong></a><br />
        By <a href="../../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Creado por SIU<br /><a href="../../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a></p>
    </div>
    <div id="sitefooter">
    </div>
<script type="text/javascript">
if (document.getElementById('link_php')) {
document.getElementById('link_php').onclick = function() {
    location.href = '../../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api/index.html';
    return false;
}
document.getElementById('link_js').onclick = function() {
    location.href = '../../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api_js/index.html';
    return false;
}
document.getElementById('link_wiki').onclick = function() {
    location.href = '../../Referencia.html';
    return false;
}
}
</script>
  </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>