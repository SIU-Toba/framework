<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
 <title>Referencia/Objetos/ei_formulario_ml - SIU-Toba - Trac</title><link rel="start" href="../../../wiki.html" /><link rel="search" href="../../../../../external.html?link=https://localhost/trac/toba/search" /><link rel="help" href="../../TracGuide.html" /><link rel="stylesheet" href="../../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../../../external.html?link=https://localhost/trac/toba/wiki/Referencia/Objetos/ei_formulario_ml?format=txt" title="Plain Text" type="text/plain" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}

/* trac php syntax highlighting */
.code-block {
    line-height: 1em;
    font-family: Courier, monotype;
    font-size: 12px;
    }
.h_question { color: #0000BB; } /* highlight.default */
.hphp_commentline { color: #FF8000; } /* highlight.comment */
.hphp_operator { color: #007700; } /* highlight.keyword */
.hphp_word { color: #007700; } /* highlight.keyword */
.hphp_default {}
.hphp_variable { color: #0000BB; } /* highlight.default */
.hphp_hstring { color: #DD0000; } /* highlight.string */
.hphp_simplestring { color: #DD0000; } /* highlight.string */
.h_tagunknown {}
.h_default {}

.code-keyword { color: #007700; font-weight: normal; }
.code-lang { color: #0000BB; font-weight: normal; }
.code-comment { color: #FF8000; font-weight: normal;}
.code-string { color: #DD0000; font-weight: normal;}

pre { padding:0; margin: 0}

.tablas-screenshots td:first-child { background-color: #D5CECD; width: 30%}
.tablas-screenshots table { width: 90%; border: 1px solid gray; }
.tablas-screenshots td { }
.tablas-screenshots table.wiki td { border: 1px solid gray; }

#tkt-changes-hdr {
    clear: both;
    padding-top: 30px;
}
.wiki-toc {
    clear: right;
    min-width: 160px;
    background-color:#F7F7F7;    
    border: 1px solid #D7D7D7;
}
.wiki-toc .active {
    background-color: #890C71;
    padding: 1px;
}
.wiki-toc .active a {
    color:white; 
}
.wiki-toc .active a:hover {
    background-color:  #890C71;
}
.indice-general {
/*    background-color: #FFFFDD;*/
}
.wikipage h1 {
    padding-top: 5px;
}
.wikipage h2 {
 padding: 2px;
}
.wikipage h1 {
    font-size: 28px;
}
.wikipage h2 {
    background-color: #890C71;
    color: white;
    padding-left: 10px;
    margin-top: 30px;
    font-size: 100%;
    border: 1px solid gray;
}
.wikipage h3 {
    font-size:100%;
}
li {
    margin-bottom:4px;
}
li * {
    margin-bottom:0;
}
/*a {
 color: #890C71;
}*/
@media print {
 .wiki-toc { display: none }
}
#tkt-changes-hdr, .tkt-chg-list { 
    font-size:80%;
    text-align:right;
}

</style>
 <script type="text/javascript" src="../../../chrome/common/js/trac.js"></script>
</head>

			<body>
			<table border='0' cellspacing='0' cellpadding='0' height='48' width='100%'>
			  <tr>
			
				<td class='header-top-left'><img src='../../../../../../api/media/logo.png' border='0'/></td>
			    <td class='header-top-right'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../../api/media/wiki.png' />
			    	<a href='../../../../../../api/index.html'  title='Navegar hacia la documentación PHP'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../../api/media/php-small.png' /></a> 
			    	<a href='../../../../../../api_js/index.html'  title='Navegar hacia la documentación Javascript'>    		
			    	<img border='0' style='vertical-align: middle' src='../../../../../../api/media/javascript-small.png' /></a>
			  </tr>
			
			  <tr>
			    <td colspan='2' class='header-menu'>
			  		  [ <a href='http://desarrollos2.siu.edu.ar/trac/toba/wiki/Referencia/Objetos/ei_formulario_ml' title='El sitio online contiene contenidos mas detallados y actualizados'
						class='menu'>Ver online</a> ]
			    </td>
			
			  </tr>
			  <tr><td colspan='2' class='header-line'><img src='../../../../../../api/media/empty.png' width='1' height='1' border='0' alt=''  /></td></tr>
			</table>
		


<div id="banner">

<div id="header"><a id="logo" href="../../../../../external.html?link=https://localhost/trac/toba"><img src="../../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../../../external.html?link=https://localhost/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../../../external.html?link=https://localhost/trac/toba/login">Login</a></li><li><a href="../../../../../external.html?link=https://localhost/trac/toba/settings">Settings</a></li><li><a href="../../TracGuide.html" accesskey="6">Help/Guide</a></li><li class="last"><a href="../../../../../external.html?link=https://localhost/trac/toba/about">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a href="../../../wiki.html" accesskey="1">Wiki</a></li><li><a href="../../../../../external.html?link=https://localhost/trac/toba/timeline" accesskey="2">Timeline</a></li><li><a href="../../../../../external.html?link=https://localhost/trac/toba/browser">Browse Source</a></li><li class="last"><a href="../../../../../external.html?link=https://localhost/trac/toba/search" accesskey="4">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
  <li><a href="../../../wiki.html">Start Page</a></li>
  <li><a href="../../TitleIndex.html">Title Index</a></li>
  <li><a href="../../../../../external.html?link=https://localhost/trac/toba/wiki/RecentChanges">Recent Changes</a></li>
  
   <li class="last"><a href="../../../../../external.html?link=https://localhost/trac/toba/wiki/Referencia/Objetos/ei_formulario_ml?action=history">Page History</a></li>
  
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   <div class="wikipage">
    <div id="searchable"><p>
<div class="wiki-toc indice-general"><h4>Indice General</h4><ul><li><a href="../../Instalacion.html">Instalación</a></li><li><a href="../../Referencia.html">Conceptos Básicos</a></li><li><a href="../Objetos.html">Componentes</a></li><li><a href="../Eventos.html">Eventos</a></li><li><a href="../FuenteDatos.html">Fuentes de Datos</a></li><li><a href="Persistencia.html">Persistencia</a></li><li><a href="../../Tutorial.html">Tutorial</a></li><li><a href="../../Proyectos/Referencia.html">Proyecto Referencia</a></li><li><a href="../../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/index.html"><img src="../../../../../toba_editor_trunk/doc/api/media/php-small.png" style="vertical-align: middle"/> API PHP</a><li><a href="../../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api_js/index.html"><img src="../../../../../toba_editor_trunk/doc/api/media/javascript-small.png" style="vertical-align: middle"/> API Javascript</a></ul></div>
<div class="wiki-toc"><h4>En esta página</h4><ol><li><a href="#Definición">Definición</a></li><li>
<a href="#Carga">Carga</a></li><li>
<a href="#Eventos">Eventos</a><ol><li><a href="#Eventosquemanejandatos">Eventos que manejan datos</a></li><li>
<a href="#Selecciones">Selecciones</a></li></ol><li><a href="#MétodosdeAnálisis">Métodos de Análisis</a><ol><li><a href="#Análisisenlínea">Análisis en línea</a></li><li>
<a href="#Análisisporeventos">Análisis por eventos</a></li></ol><li><a href="#AgregaryQuitarlíneas">Agregar y Quitar líneas</a></li><li>
<a href="#ValidacionesenPHP">Validaciones en PHP</a></li><li>
<a href="#ExtensiónJS">Extensión JS</a><ol><li><a href="#Validacióngeneralyeventos">Validación general y eventos</a></li><li>
<a href="#Validacióndeefs">Validación de efs</a></li><li>
<a href="#Procesamientodeefs">Procesamiento de efs</a></li></ol><li><a href="#Ejemplos">Ejemplos</a></li></ol></li></ol></div>
<a href="../../WikiStart.html">Inicio</a> / <a href="../../Referencia.html">Referencia</a> / <a href="../Objetos.html">Objetos</a> / ei_formulario_ml
</p>
<h1 id="FormularioMultilínea">Formulario Multilínea</h1>
<p>
Un <img onerror='alert("No se encuentra la imagen: " + this.src)' style='vertical-align:middle' border=0 src='../../../../../toba_trunk/img/objetos/ut_formulario_ml.gif' /> formulario multilínea (ei_formulario_ml) presenta una grilla de  <img onerror='alert("No se encuentra la imagen: " + this.src)' style='vertical-align:middle' border=0 src='../../../../../toba_trunk/img/objetos/efs.gif' /> <a class="wiki" href="../efs.html">campos</a> repetidos una cantidad dada de filas. permitiendo recrear la carga de distintos registros con la misma estructura. La definición y uso de la grilla de campos es similar al <img onerror='alert("No se encuentra la imagen: " + this.src)' style='vertical-align:middle' border=0 src='../../../../../toba_trunk/img/objetos/ut_formulario.gif' /> <a class="wiki" href="ei_formulario.html">formulario simple</a> con el agregado de lógica para manejar un número arbitrario de filas.
</p>
<p>
<a href='../../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/Componentes/Eis/toba_ei_formulario_ml.html#' title='Navega hacia la documentacion PHP'><img style='vertical-align:middle' src='../../../../../toba_editor_trunk/doc/api/media/php-small.png' /> toba_ei_formulario_ml</a> <br />
<a href='../../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api_js/ei_formulario_ml.html#' title='Navega hacia la documentacion JAVASCRIPT'><img style='vertical-align:middle' src='../../../../../toba_editor_trunk/doc/api/media/javascript-small.png' /> ei_formulario_ml</a>
</p>
<h2 id="Definición">Definición</h2>
<ul><li><i>Ancho</i>: Pixeles o porcentaje que ocupa el objeto gráficamente. Recordar incluír las <strong>medidas</strong> (px, %, etc.).
</li><li><i>Líneas</i>: En la definición se puede incluir una cantidad inicial de filas una  opción permite modificar esta cantidad de filas agregando nuevas o eliminando existentes. Durante la ejecución la cantidad y contenido de cada filas se especifica durante la configuración del componente.
</li><li><i>Agregar/Quitar líneas</i>: Se incluyen dos botones para agregar y quitar líneas. El agregado puede ser <i>en línea</i> utilizando javascript (más dinámico) o navegando al server como un evento más (más seguro para hacer validaciones o para incluír cascadas).
</li><li><i>Ordenar líneas</i>: Se incluyen dos controles para que el usuario pueda ordenar las líneas subiendolas o bajandolas. Si se defina una columna, el orden se envía a travez de esta columna sino el orden se refleja en el orden en que se envían estas filas a los eventos. Este mismo formato se puede utilizar cuando se carga al componente en caso que se quiera enviar las líneas ordenadas al cliente.
</li><li><i>Numerar filas</i>: A la izquierda de cada fila se incluye una numeración comenzando desde uno, es sólo para uso cosmético.
</li><li><i>Análisis de cambios</i>: Se explica más abajo.
</li><li><i>EF - Totalizar</i>: Dentro de la definición de un ef se puede marcar la opción <i>Totalizar</i>, esto implica que ante el cambio de un valor, esta columna se totaliza automáticamente (sería un procesamiento por defecto).
</li></ul><h2 id="Carga">Carga</h2>
<p>
El ml espera en la carga un matriz con la primer dimensión representando el orden de las filas y la segunda un arreglo asociativo del tipo <tt>'id_ef' =&gt; valor</tt> . Cuando no se carga con datos al formulario se utilizan las filas vacías definidas en el editor.
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">conf__formulario</span><span class="code-keyword">(</span><span class="code-lang">$form</span><span class="code-keyword">)
    {
       </span><span class="code-lang">$datos </span><span class="code-keyword">= array(
            array(</span><span class="code-string">'id' </span><span class="code-keyword">=&gt; </span><span class="code-lang">1</span><span class="code-keyword">, </span><span class="code-string">'importe' </span><span class="code-keyword">=&gt; </span><span class="code-lang">100</span><span class="code-keyword">),
            array(</span><span class="code-string">'id' </span><span class="code-keyword">=&gt; </span><span class="code-lang">3</span><span class="code-keyword">, </span><span class="code-string">'importe' </span><span class="code-keyword">=&gt; </span><span class="code-lang">412</span><span class="code-keyword">),
        );
    </span><span class="code-lang">$form</span><span class="code-keyword">-&gt;</span><span class="code-lang">set_datos</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">);
    </span><span class="code-comment">//--- Para la carga, una forma alternativa al set_datos es retornar los datos (return $datos)
    </span><span class="code-keyword">}
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><h2 id="Eventos">Eventos</h2>
<p>
El rol gráfico del ML toma comportamientos del formulario común (en definitiva se están editando datos) pero también al cuadro ya que posee una estructura tabular. Es por esto que generalmente se lo utiliza tanto para modificar datos como para seleccionar existentes. El único modelo que se incluye inserta el evento modificación como implícito. Para agregar un evento como el de selección recuerde ponerlo como 'A nivel de filas'.
</p>
<h3 id="Eventosquemanejandatos">Eventos que manejan datos</h3>
<p>
Entran en esta categoría aquellos eventos no declarados a nivel de fila y que manejan datos.
Los eventos disparados por el ML varía según el tipo de 'Análisis de cambios' seleccionado en la definición del objeto, por defecto ('Sin análisis') maneja un único evento, allí se envian la matriz de filas por columnas, por ejemplo:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__form__modificacion</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">)
    {
        </span><span class="code-lang">var_export</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">);
    }
</span><span class="code-lang">?&gt;
</span>array (
  0 =&gt; array ('fecha' =&gt; '2005-07-04'),
  1 =&gt; array ('fecha' =&gt; '2005-07-05')
)
</span>
</pre></div><h3 id="Selecciones">Selecciones</h3>
<p>
Entran en esta categoría aquellos eventos declarados a nivel de fila. El evento se dispara llevando como parametro una clave que identifica la fila.
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__form__seleccion</span><span class="code-keyword">(</span><span class="code-lang">$fila</span><span class="code-keyword">)
    {
        </span><span class="code-lang">var_dump</span><span class="code-keyword">(</span><span class="code-lang">$fila</span><span class="code-keyword">);
    }
</span><span class="code-lang">?&gt;
</span>int(1534)
</span>
</pre></div><h2 id="MétodosdeAnálisis">Métodos de Análisis</h2>
<p>
Muchas veces es necesario poder seguir la traza de las modificaciones en el cliente, que registro se modificaron, cuales se agregaron, cuales se borraron. Para esto se configura el 'Análisis de cambios', este análisis puede ser en línea o mediante eventos.
</p>
<h3 id="Análisisenlínea">Análisis en línea</h3>
<p>
Cuando es análisis 'en línea' se agrega una columna apex_ei_analisis_fila indicando el tipo de cambio producido. Así mismo cada fila posee un identificador propio como clave del arreglo asociativo. Por ejemplo:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__form__modificacion</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">)
    {
        </span><span class="code-lang">var_export</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">);
    }
</span><span class="code-lang">?&gt;
</span>array (
  12300 =&gt; array('fecha' =&gt; '2005-07-04', apex_ei_analisis_fila =&gt; 'M'),    //Esta fila fue modificada
  12301 =&gt; array('fecha' =&gt; '2005-07-05', apex_ei_analisis_fila =&gt; 'A'),    //Esta es una fila nueva
  12302 =&gt; array(apex_ei_analisis_fila =&gt; 'B')                                //Esta es una fila eliminada
)
</span>
</pre></div><h3 id="Análisisporeventos">Análisis por eventos</h3>
<p>
Cuando es análisis 'por eventos' se dispara un evento registro_alta, registro_baja o registro_modificacion por línea, conteniendo la clave de la fila y los datos si es que lleva. Por ejemplo el set de datos anterior originaria los siguientes eventos:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__ml__registro_alta</span><span class="code-keyword">(</span><span class="code-lang">$id</span><span class="code-keyword">, </span><span class="code-lang">$registro</span><span class="code-keyword">)
    {
        echo </span><span class="code-string">"Dando de alta el registro $id\n"</span><span class="code-keyword">;
    }

    function </span><span class="code-lang">evt__ml__registro_baja</span><span class="code-keyword">(</span><span class="code-lang">$id</span><span class="code-keyword">)
    {
        echo </span><span class="code-string">"Dando de baja el registro $id\n"</span><span class="code-keyword">;    
    }

    function </span><span class="code-lang">evt__ml__registro_modificacion</span><span class="code-keyword">(</span><span class="code-lang">$id</span><span class="code-keyword">, </span><span class="code-lang">$registro</span><span class="code-keyword">)
    {
        echo </span><span class="code-string">"Modificando el registro $id\n"</span><span class="code-keyword">;
    }        
</span><span class="code-lang">?&gt;
</span>Modificando el registro 12300.
Dando de alta el registro 12301.
Dando de baja el registro 12302.
</span>
</pre></div><h2 id="AgregaryQuitarlíneas">Agregar y Quitar líneas</h2>
<p>
Por omisión la función de agregar o quitar líneas se realiza en el cliente utilizando javascript, esto brinda mucho dinamismo a la operación sacrificando la posibilidad de incluir lógica de negocio confiable en el proceso. Cuando la decisión de crear o eliminar filas debe pasar por lógica de negocio o cosas que depeden de la base de datos, debe transferirse la responsabildad al lado servidor, es por eso que tanto agregar como quitar puede ser parametrizado para que hagan un viaje al servidor.
</p>
<p>
<strong>Agregado en el Server</strong>: Como casi toda interacción con el cliente, el agregado se dispara en el servidor como un evento <i>pedido_registro_nuevo</i>. El evento se puede:
</p>
<ul><li>No escuchar: en este caso se muesra al usuario un nuevo registro vacío
</li><li>Escuchar y agregar un registro con el método <a href='../../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/Componentes/Eis/toba_ei_formulario_ml.html#set_registro_nuevo' title='Navega hacia la documentacion PHP'><img style='vertical-align:middle' src='../../../../../toba_editor_trunk/doc/api/media/php-small.png' /> set_registro_nuevo</a>
</li><li>Escuchar pero no agrega un registro: Rechaza la solicitud del usuario de agegar el registro.
</li></ul><h2 id="ValidacionesenPHP">Validaciones en PHP</h2>
<p>
Ver las validaciones del <a class="wiki" href="ei_formulario.html">formulario simple</a>.
</p>
<h2 id="ExtensiónJS">Extensión JS</h2>
<p>
Se puede usar el mecanismo de <a class="wiki" href="../ExtensionesJavascript.html">extensión javascript</a> para agregar comportamientos en el cliente.
Estas extensiones necesitan ser definidas en una subclase del componente, dentro del método <i><a href='../../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/Componentes/Eis/toba_ei.html#extender_objeto_js' title='Navega hacia la documentacion PHP'><img style='vertical-align:middle' src='../../../../../toba_editor_trunk/doc/api/media/php-small.png' /> extender_objeto_js</a></i>.
</p>
<p>
La extensión js se basa en la del <a class="wiki" href="ei_formulario.html">formulario simple</a>, con la diferencia que ahora varias filas de estos <a class="wiki" href="../efs.html">efs</a> están involucradas. Así, para direccionar desde javascript a un ef particular se hace referenciando a la fila específica ej: <tt>this.ef('id_ef').ir_a_fila(2).metodo()</tt>. El hecho que lo que era una lista de campos se convierta en un matriz hace que todas las extensiones se vuelvan un poco más complejas. 
</p>
<h3 id="Validacióngeneralyeventos">Validación general y eventos</h3>
<p>
Tanto la validación general como escuchar un evento particular es identico a la forma que se explica en el formulario simple. 
</p>
<h3 id="Validacióndeefs">Validación de efs</h3>
<p>
Las validaciones se definen en forma similar al formulario simple, sólo que ahora la validación recibe como parámetro la fila sobre la que se aplica la validación. Con esta fila es posible referenciar directamente al campo en cuestión.
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">echo </span><span class="code-string">"
        //Valida que las fechas, si están seleccionadas, sean un día lunes.
        {$this-&gt;objeto_js}.evt__fecha__validar = function (fila) {
            var lunes = 1;
            var ef_fecha = this.ef('fecha').ir_a_fila(fila);
            var fecha = ef_fecha.fecha();
            if (fecha != null &amp;&amp; fecha.getDay() != lunes) {
                ef_fecha.set_error('Sólo está permitido ingresar días lunes');
                return false;
            }
            return true;
        }
    "</span><span class="code-keyword">;
</span></span>
</pre></div><h3 id="Procesamientodeefs">Procesamiento de efs</h3>
<p>
Los procesamientos se lanzan cuando un ef cambia su valor en el cliente. El procesamiento se escucha como un evento más y recibe dos parámetros: uno que indica si el disparo es_inicial o no y el otro indica el número de fila donde se inicio el disparo. El procesamiento inicial es aquel que se da en la carga de la pantalla, sin intervención explícita del usuario, a partir de allí los procesamientos dependen exclusivamente de los cambios introducidos por el usuario. Por ejemplo si se cuenta con tres campos: importe, descuento y neto, este último debe cargarse en base a la resta de los primeros dos. En la implementación este cambio se hace escuchando los procesamientos del importe y del descuento:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">echo </span><span class="code-string">"
        //Cuando se modifica el valor del importe, recalcula el neto
        {$this-&gt;objeto_js}.evt__importe__procesar = function(es_inicial, fila) {
            {$this-&gt;objeto_js}.refrescar_importes(es_inicial, fila);
        }
        
        //Cuando se modifica el valor del descuento, recalcula el neto
        {$this-&gt;objeto_js}.evt__descuento__procesar = function(es_inicial, fila) {
            {$this-&gt;objeto_js}.refrescar_importes(es_inicial, fila);
        }
        
        {$this-&gt;objeto_js}.refrescar_importes = function(es_inicial, fila) {
            var importe = this.ef('importe').ir_a_fila(fila).get_estado();
            var descuento = this.ef('descuento').ir_a_fila(fila).get_estado();
            this.ef('neto').ir_a_fila(fila).set_estado(importe - descuento);
        }        
    "</span><span class="code-keyword">;
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><p>
En el formulario multilínea existe un procesamiento opcional que puede ser agregado, es la capacidad de sumarizar una columna. Cuando este totalización esta activada en el ef (utilizando el administrador) en cualquier cambio de valor en esa columna se dispara la sumarización de cada campo. Esto funciona bien sólo para efs numéricos (número, porcentaje, moneda, etc.).
</p>
<h2 id="Ejemplos">Ejemplos</h2>
<p>
Existe un ejemplo en el proyecto de <a class="wiki" href="../../Proyectos/Referencia.html">Referencia</a>, item <i>/Componentes/Formularios/Multilínea</i>.
</p>
<p>
<img onerror='alert("No se encuentra la imagen: " + this.src)' style='vertical-align:middle' border=0 src='../../../../../toba_editor_trunk/img/referencia.png' /> <strong><a href='../../../../../external.html?link=https://localhost/toba_referencia_trunk/aplicacion.php?ai=toba_referencia||/objetos/ei_formulario_ml' title='Navega hacia el ejemplo en el proyecto online de referencia'>Ejemplo de formulario ML</a></strong>
</p>
</div>
   </div>
   
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"));
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../../../external.html?link=https://localhost/trac/toba/wiki/Referencia/Objetos/ei_formulario_ml?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../../../external.html?link=http://trac.edgewall.com/"><img src="../../../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../../../external.html?link=https://localhost/trac/toba/about"><strong>Trac 0.9.5</strong></a><br />
  By <a href="../../../../../external.html?link=http://www.edgewall.com/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por el SIU<br /><a href="../../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>



 </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>

