<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="../../../../external.html?link=http://www.w3.org/1999/xhtml">
  
  

  


  

  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
      Referencia/PuntosMontaje – SIU-Toba
    </title>
        <link rel="search" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/PuntosMontaje?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="up" href="../Referencia.html" title="View parent page" />
        <link rel="start" href="../../wiki.html" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search/opensearch" title="Search SIU-Toba" />
    <script type="text/javascript" src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/toba/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    <script type="text/javascript" src="../../chrome/site/mootools.js"></script>
    <script type="text/javascript" src="../../chrome/site/slimbox.js"></script>
    <link rel="stylesheet" href="../../chrome/site/portada.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../chrome/site/slimbox.css" type="text/css" media="screen" />
    <a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a>
    <link rel="stylesheet" type="text/css" href="../../chrome/site/style.css" />
  </head>
  <body>
<a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu_original.gif" width="282" height="90" alt="SIU-Toba" /></a>
    <div id="siteheader">
    </div>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" alt="Toba" height="90" width="282" /></a>
      </div>
      <form id="search" action="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../TracGuide.html">Help/Guide</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about">About Trac</a></li><li class="last"><a href="../../prefs.html">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../../wiki.html">Wiki</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline">Timeline</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/roadmap">Roadmap</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/query">View Tickets</a></li><li class="last"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../Referencia.html">Up</a></li><li><a href="../WikiStart.html">Start Page</a> / <a href="../Referencia.html">Referencia</a> / PuntosMontaje</li><li><a href="../TitleIndex.html">Index</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/PuntosMontaje?action=history">History</a></li><li class="last"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/PuntosMontaje?action=diff&amp;version=24">Last Change</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View Referencia" href="../Referencia.html">Referencia</a><span class="pathentry sep">/</span><a class="pathentry" title="View Referencia/PuntosMontaje" href="PuntosMontaje.html">PuntosMontaje</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="Puntosdemontaje">Puntos de montaje</h1>
<p>
Un punto de montaje es un referencia a una ubicación al sistema de archivos. Hasta la versión 1.5 de Toba los proyectos contaban con sólo un punto de montaje implícito, la carpeta <i>php</i> dentro de la carpeta del proyecto. A partir de la versión 1.6 se introduce explícitamente la noción de punto de montaje.<br />
En cada formulario dentro del editor de Toba donde se introducía el path de un archivo ahora hay también un selector de puntos de montaje:<br /><br />
<a style="padding:0; border:none" href="../../attachment/wiki/Referencia/PuntosMontaje/pm_editor.html"><img src="../../raw-attachment/wiki/Referencia/PuntosMontaje/pm_editor.png" /></a><br /><br />
Este selector se utiliza para indicar a Toba la ubicación del archivo. De esta manera se permite el consumo de código externo al mismo proyecto.
</p>
<h2 id="Tiposdepuntosdemontaje">Tipos de puntos de montaje</h2>
<p>
Hay tres tipos de puntos de montaje, cada uno tiene un funcionamiento específico. A continuación se hace un detalle de cada uno.
</p>
<h3 id="ProyectoToba">Proyecto Toba</h3>
<p>
Estos puntos de montaje pueden apuntar a otros proyectos dentro de la misma instancia. De esta manera se puede consumir código de otros proyectos.
</p>
<h3 id="PersonalizaciónproyectoToba">Personalización proyecto Toba</h3>
<p>
Estos puntos de montaje pueden apuntar a la carpeta personalización de otros proyectos en la misma instancia. De esta manera un proyecto personalizado puede consumir código de otro.
</p>
<h3 id="Externo">Externo</h3>
<p>
Estos puntos de montaje pueden apuntar a cualquier ubicación en el sistema de archivo. 
</p>
<h2 id="Uso">Uso</h2>
<h3 id="Administración">Administración</h3>
<p>
Los puntos de montaje de un proyecto se administran desde una pantalla en la solapa de configuración de Toba - Editor. A continuación se muestra una captura de esta pantalla:<br /><br />
<a style="padding:0; border:none" href="../../attachment/wiki/Referencia/PuntosMontaje/pantalla_pms.html"><img src="../../raw-attachment/wiki/Referencia/PuntosMontaje/pantalla_pms.png" /></a>
<br /><br />
Esta es la pantalla inicial de la edición de puntos de montaje. En la parte superior se tiene un cuadro mostrando todos los puntos de montaje existentes en el sistema y en la parte inferior se tiene un formulario para el alta de un nuevo punto de montaje.<br />
Hay dos pantallas de alta de puntos de montaje; Una para los internos de Toba (proyectos y personalizaciones) y otra para los externos.<br /><br />
</p>
<h4 id="Altadepuntosdemontajedeproyectoypersonalizaciones">Alta de puntos de montaje de proyecto y personalizaciones</h4>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Referencia/PuntosMontaje/alta_pm_proyecto.html"><img src="../../raw-attachment/wiki/Referencia/PuntosMontaje/alta_pm_proyecto.png" /></a><br /><br />
Esta es la pantalla de alta de un punto de montaje de proyecto. Lo único que hay que hacer es definir una etiqueta y seleccionar el proyecto al cuál se quiere referenciar. Adicionalmente se puede agregar una descripción. La etiqueta provee una forma de acceder al punto de montaje desde el código. El manejo de ubicaciones en el sistema de archivos lo hace automáticamente Toba.<br />
La pantalla de alta de un punto de montaje de personalización es análoga.
</p>
<h4 id="Altadepuntosdemontajeexternos">Alta de puntos de montaje externos</h4>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Referencia/PuntosMontaje/alta_pm_externo.html"><img src="../../raw-attachment/wiki/Referencia/PuntosMontaje/alta_pm_externo.png" /></a><br /><br />
En esta pantalla se debe definir una etiqueta, que cumple la misma función que la los puntos de montaje de proyecto, y un path. Este path debe ser <strong>absoluto</strong> y apuntar a la carpeta que contiene el código que se quiere referenciar.
</p>
<h3 id="Utilización">Utilización</h3>
<p>
A continuación veremos porciones de código para utilizar correctamente los puntos de montaje; de nuevo separamos en dos secciones, una para los puntos de montaje de proyecto y personalizaciones y otra para los puntos de montaje externos.
</p>
<h4 id="Proyectoypersonalización">Proyecto y personalización</h4>
<p>
Supongamos que queremos consumir código de otro proyecto y que ya dimos de alta el punto de montaje en la pantalla de alta de los mismos. Para esto debemos seguir el siguiente patrón de código:
</p>
<div class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">clase_ejemplo</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">ejemplo</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$pm</span> <span class="o">=</span> <span class="nx">toba</span><span class="o">::</span><span class="na">puntos_montaje</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'referencia'</span><span class="p">);</span>
        <span class="nv">$pm</span><span class="o">-&gt;</span><span class="na">registrar_autoload</span><span class="p">();</span>  <span class="c1">// registramos el autoloader del proyecto
</span>        <span class="c1">// Todo el código que se introduzca aquí va a poder referenciar a todas
</span>        <span class="c1">// las clases e interfaces del proyecto al que apunta el punto de montaje
</span>        <span class="nv">$pm</span><span class="o">-&gt;</span><span class="na">desregistrar_autoload</span><span class="p">();</span> <span class="c1">// desregistramos el autoloader del proyecto
</span>    <span class="p">}</span>
    <span class="o">...</span>
</pre></div><p>
La llamada a <tt>toba::puntos_montaje()-&gt;get('referencia');</tt> obtiene el punto de montaje a partir de la etiqueta pasada como parámetro, en nuestro caso <i>referencia</i>. Luego se registra el autoloader del proyecto referenciado a través de la llamada <tt>$pm-&gt;registrar_autoload();</tt>, esto ubica el archivo de autoload del otro proyecto y lo carga (ver <a class="wiki" href="Autoload.html">Referencia/Autoload</a>). Después se insertan el código que referencia a otro proyecto y por último se desregistra el autoloader, con la línea <tt>$pm-&gt;desregistrar_autoload();</tt>, para que no haya colisión de clases.
</p>
<h4 id="Externos">Externos</h4>
<p>
Los puntos de montaje externos no proveen una funcionalidad de autoload ya que es imposible conocer el esquema de autoloading de un proyecto desconocido, si es que lo tiene. Por lo tanto se proveen primitivas para acceder al path del proyecto externo y de esta manera no escribir en código la ubicación de cada proyecto ya que esta puede cambiar dependiendo la instalación.
Ejemplo de uso:
</p>
<div class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">clase_ejemplo</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">ejemplo</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$pm</span> <span class="o">=</span> <span class="nx">toba</span><span class="o">::</span><span class="na">puntos_montaje</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'libreria_externa'</span><span class="p">);</span> <span class="c1">// cargamos el punto de montaje con id 'libreria_externa'
</span>        <span class="k">require_once</span><span class="p">(</span><span class="nv">$pm</span><span class="o">-&gt;</span><span class="na">get_path_absoluto</span><span class="p">()</span><span class="o">.</span><span class="s1">'/clase.php'</span><span class="p">);</span> <span class="c1">// incluimos la clase a utilizar
</span>        <span class="nv">$clase</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">clase</span><span class="p">();</span>  <span class="c1">// en este punto ya podemos crear la clase
</span>    <span class="p">}</span>
    <span class="o">...</span>
</pre></div><p>
El funcionamiento de estos puntos de montaje difiere al de los de proyecto y personalización en que la información es guardada en el archivo <i>instancia.ini</i> en vez de en la base de datos. Esto provoca que el path del punto de montaje no se exporte y por lo tanto quede indefinido en cada instalación. Cuando Toba trata de obtener un punto de montaje externo que no tiene definido el path en <i>instancia.ini</i> muestra un mensaje de error explicando como definir el path. A continuación se muestra una captura de pantalla de ese error:
<br /><br /><a style="padding:0; border:none" href="../../attachment/wiki/Referencia/PuntosMontaje/error_pm_externo.html"><img src="../../raw-attachment/wiki/Referencia/PuntosMontaje/error_pm_externo.png" /></a><br /><i>Notemos que las apariciones de 'proyecto' y 'path/a/instancia.ini' serán reemplazadas por las que correspondan para el proyecto que se esté ejecutando</i><br /><br />
De esta manera, el usuario perspicaz, incluirá esta entrada en el <i>instancia.ini</i> y el proyecto funcionará. Otra opción es agregar una sección en los manuales de instalación de la aplicación donde se especifique la inclusión de esta clave en el archivo.
</p>

        
        
      </div>
          <h3>Attachments</h3>
          <ul>
              <li>
      <a href="../../attachment/wiki/Referencia/PuntosMontaje/pm_editor.html" title="View attachment">pm_editor.png</a>
      <a href="../../raw-attachment/wiki/Referencia/PuntosMontaje/pm_editor.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="7814 bytes">7.6 KB</span>) - added by <em>ablanco</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2010-09-16T17%3A19%3A06-0300&amp;precision=second" title="2010-09-16T17:19:06-0300 in Timeline">2 months</a> ago.
              </li>
              <li>
      <a href="../../attachment/wiki/Referencia/PuntosMontaje/pantalla_pms.html" title="View attachment">pantalla_pms.png</a>
      <a href="../../raw-attachment/wiki/Referencia/PuntosMontaje/pantalla_pms.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="23033 bytes">22.5 KB</span>) - added by <em>ablanco</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2010-09-17T13%3A46%3A12-0300&amp;precision=second" title="2010-09-17T13:46:12-0300 in Timeline">2 months</a> ago.
              </li>
              <li>
      <a href="../../attachment/wiki/Referencia/PuntosMontaje/alta_pm_proyecto.html" title="View attachment">alta_pm_proyecto.png</a>
      <a href="../../raw-attachment/wiki/Referencia/PuntosMontaje/alta_pm_proyecto.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="11167 bytes">10.9 KB</span>) - added by <em>ablanco</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2010-09-17T14%3A06%3A07-0300&amp;precision=second" title="2010-09-17T14:06:07-0300 in Timeline">2 months</a> ago.
              </li>
              <li>
      <a href="../../attachment/wiki/Referencia/PuntosMontaje/alta_pm_externo.html" title="View attachment">alta_pm_externo.png</a>
      <a href="../../raw-attachment/wiki/Referencia/PuntosMontaje/alta_pm_externo.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="8027 bytes">7.8 KB</span>) - added by <em>ablanco</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2010-09-17T14%3A07%3A07-0300&amp;precision=second" title="2010-09-17T14:07:07-0300 in Timeline">2 months</a> ago.
              </li>
              <li>
      <a href="../../attachment/wiki/Referencia/PuntosMontaje/error_pm_externo.html" title="View attachment">error_pm_externo.png</a>
      <a href="../../raw-attachment/wiki/Referencia/PuntosMontaje/error_pm_externo.png" title="Download" class="trac-rawlink"><img src="../../chrome/common/download.png" alt="Download" /></a>
      (<span title="12000 bytes">11.7 KB</span>) - added by <em>ablanco</em>
      <a class="timeline" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline?from=2010-09-20T13%3A20%3A34-0300&amp;precision=second" title="2010-09-20T13:20:34-0300 in Timeline">2 months</a> ago.
              </li>
          </ul>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("../../pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Referencia/PuntosMontaje?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about"><strong>Trac 0.11.7</strong></a><br />
        By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Creado por SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a></p>
    </div>
    <div id="sitefooter">
    </div>
<script type="text/javascript">
if (document.getElementById('link_php')) {
document.getElementById('link_php').onclick = function() {
    location.href = '../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api/index.html';
    return false;
}
document.getElementById('link_js').onclick = function() {
    location.href = '../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api_js/index.html';
    return false;
}
document.getElementById('link_wiki').onclick = function() {
    location.href = '../Referencia.html';
    return false;
}
}
</script>
  </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>