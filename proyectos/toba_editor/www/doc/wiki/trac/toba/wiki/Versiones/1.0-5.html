<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
 <title>Versiones/1.0.4 - SIU-Toba - Trac</title><link rel="start" href="../../wiki.html" /><link rel="search" href="../../../../external.html?link=https://localhost/trac/toba/search" /><link rel="help" href="../TracGuide.html" /><link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/1.0.4?format=txt" title="Plain Text" type="text/x-trac-wiki" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}

/* trac php syntax highlighting */
.code-block {
    line-height: 1em;
    font-family: Courier, monotype;
    font-size: 12px;
    }
.h_question { color: #0000BB; } /* highlight.default */
.hphp_commentline { color: #FF8000; } /* highlight.comment */
.hphp_operator { color: #007700; } /* highlight.keyword */
.hphp_word { color: #007700; } /* highlight.keyword */
.hphp_default {}
.hphp_variable { color: #0000BB; } /* highlight.default */
.hphp_hstring { color: #DD0000; } /* highlight.string */
.hphp_simplestring { color: #DD0000; } /* highlight.string */
.h_tagunknown {}
.h_default {}

.code-keyword { color: #007700; font-weight: normal; }
.code-lang { color: #0000BB; font-weight: normal; }
.code-comment { color: #FF8000; font-weight: normal;}
.code-string { color: #DD0000; font-weight: normal;}

pre { padding:0; margin: 0}

.tablas-screenshots td:first-child { background-color: #D5CECD; width: 30%}
.tablas-screenshots table { width: 90%; border: 1px solid gray; }
.tablas-screenshots td { }
.tablas-screenshots table.wiki td { border: 1px solid gray; }

#tkt-changes-hdr {
    clear: both;
    padding-top: 30px;
}
.wiki-toc {
    clear: right;
    min-width: 160px;
    background-color:#F7F7F7;    
    border: 1px solid #D7D7D7;
}
.wiki-toc .active {
    background-color: #890C71;
    padding: 1px;
}
.wiki-toc .active a {
    color:white; 
}
.wiki-toc .active a:hover {
    background-color:  #890C71;
}
.indice-general {
/*    background-color: #FFFFDD;*/
}
.wikipage h1 {
    padding-top: 5px;
}
.wikipage h2 {
 padding: 2px;
}
.wikipage h1 {
    font-size: 28px;
}
.wikipage h2 {
    background-color: #890C71;
    color: white;
    padding-left: 10px;
    margin-top: 30px;
    font-size: 100%;
    border: 1px solid gray;
}
.wikipage h3 {
    font-size:100%;
}
li {
    margin-bottom:4px;
}
li * {
    margin-bottom:0;
}
/*a {
 color: #890C71;
}*/
@media print {
 .wiki-toc { display: none }
}
#tkt-changes-hdr, .tkt-chg-list { 
    font-size:80%;
    text-align:right;
}

</style>
 <script type="text/javascript" src="../../chrome/common/js/trac.js"></script>
</head>

			<body>
			<table border='0' cellspacing='0' cellpadding='0' height='48' width='100%'>
			  <tr>
			
				<td class='header-top-left'><img src='../../../../../api/media/logo.png' border='0'/></td>
			    <td class='header-top-right'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/wiki.png' />
			    	<a href='../../../../../api/index.html'  title='Navegar hacia la documentación PHP'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/php-small.png' /></a> 
			    	<a href='../../../../../api_js/index.html'  title='Navegar hacia la documentación Javascript'>    		
			    	<img border='0' style='vertical-align: middle' src='../../../../../api/media/javascript-small.png' /></a>
			  </tr>
			
			  <tr>
			    <td colspan='2' class='header-menu'>
			  		  [ <a href='http://desarrollos2.siu.edu.ar/trac/toba/wiki/Versiones/1.0-5' title='El sitio online contiene contenidos mas detallados y actualizados'
						class='menu'>Ver online</a> ]
			    </td>
			
			  </tr>
			  <tr><td colspan='2' class='header-line'><img src='../../../../../api/media/empty.png' width='1' height='1' border='0' alt=''  /></td></tr>
			</table>
		


<div id="banner">

<div id="header"><a id="logo" href="../../../../external.html?link=https://localhost/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../../external.html?link=https://localhost/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../../external.html?link=https://localhost/trac/toba/login">Login</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/settings">Settings</a></li><li><a accesskey="6" href="../TracGuide.html">Help/Guide</a></li><li class="last"><a href="../../../../external.html?link=https://localhost/trac/toba/about">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a accesskey="1" href="../../wiki.html">Wiki</a></li><li><a accesskey="2" href="../../../../external.html?link=https://localhost/trac/toba/timeline">Timeline</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/browser">Browse Source</a></li><li class="last"><a accesskey="4" href="../../../../external.html?link=https://localhost/trac/toba/search">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
   <li><a href="../../wiki.html">Start Page</a></li>
   <li><a href="../TitleIndex.html">Index by Title</a></li>
   <li><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/RecentChanges">Index by Date</a></li>
   <li class="last"><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/1.0.4?action=diff&amp;version=23">Last Change</a></li>
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   
   <div class="wikipage">
    <div id="searchable"><h1 id="CambiosVersión1.0">Cambios Versión 1.0</h1>
<ul><li>Fecha: 04/05/07
</li><li>Rama con actualizaciones: <a class="source" href="../../../../external.html?link=https://localhost/trac/toba/browser/trunk_versiones/1.0">source:trunk_versiones/1.0</a>
</li><li>Revisiones trunk involucradas: <a class="changeset" href="../../../../external.html?link=https://localhost/trac/toba/changeset/2346" title="Version 1.0.3">[2346]</a> a <a class="changeset" href="../../../../external.html?link=https://localhost/trac/toba/changeset/2505" title="Version 1.0.4. Branch para mejoras">[2505]</a>
</li></ul><h2 id="ListadeCambios">Lista de Cambios</h2>
<h3 id="Editor">Editor</h3>
<ul><li>La definición de <tt>bases.ini</tt> se puede modificar desde el editor.
</li><li>Modificación a la forma en que se busca el id_base de la fuente, en lugar de vincularse estáticamente se vinculan a través del id <tt>[instancia proyecto fuente]</tt>. Esto permite variar las bases de negocio de una instancia modificando solo este archivo.
</li><li>Se brinda la posibilidad de definir alias entre las definiciones de las bases apilando sus secciones una sobre otra. Por ej estas dos bases comparten la misma definición:
<pre class="wiki">[desarrollo quilmes impresion]
[desarrollo quilmes datos]
motor=...
...
</pre></li><li>Utilidad que permite ordenar y poner/sacar de menú a los items de una carpeta.
</li><li>Mejoras en la visualización del cronometro.
</li><li>Vista previa de los estilos de las columnas en el editor del cuadro
</li><li>Se incorpora un combo en la previsualización para cambiar el skin actual.
</li><li>Desde la previsualización se pueden abrir las subclases de los componentes.
</li></ul><h3 id="Componentes">Componentes</h3>
<ul><li>Esquema de definición e inclusión de Puntos de Control en los componentes.
</li><li>Los efs ocultos pueden definirse para que relajen su obligatoriedad.
</li><li>Posibilidad de cambiar el layout del formulario ML (ver ejemplo en referencia).
</li><li>Se separa la carga de la descripción de la de las cascadas en el ef_popup (<a class="closed ticket" href="../../../../external.html?link=https://localhost/trac/toba/ticket/489" title="Uso de comillas en strings utilizados en javascript (closed)">#489</a>):
<ul><li>La respuesta a la cascada puede variar tanto la clave como la desc.
</li><li>En la carga de descripción es un método (estático o dinámico) al cual llega una clave y se retorna la descripción asociada (un string). Se llama solo durante la etapa de configuración del ef
</li><li>En la carga de cascada es uno de los mecanismos de carga (php, sql) al cual llegan los maestros y se retorna un arreglo (clave,desc) (o solo clave si es editable)
</li></ul></li><li>El ef_popup envia al ítem de popup el valor actual del ef y de sus maestros.
</li><li>Los eventos disparados en js pasan sus parámetros por parámetro (<a class="closed ticket" href="../../../../external.html?link=https://localhost/trac/toba/ticket/481" title="Eventos en JS: Parámetros deberian llegar por parámetro (closed)">#481</a>).
</li><li>Soporte básico para relaciones de no-inclusión entre dos datos_tablas 
</li></ul><h3 id="Varios">Varios</h3>
<ul><li>Compilación PHP de metadatos de proyectos.
</li><li>Cambios de short tags PHP a los oficiales, requisito para las ultimas versiones de PHP.
</li><li>Esquema simple de instalación de proyectos basado en la extension de la clase 'proyecto', la misma debe estar en el directorio toba_modelo y debe tener el nombre del proyecto con extension PHP (ej toba_modelo/toba_referencia.php). Para probarlo se hizo la instalacion del modelo de referencia.
</li><li>Esquema de carga de las clases del framework a traves de <tt>__autoload</tt>
</li><li>Se agrego un prefijo '_' a las propiedades internas de los componentes para evitar choques en las subclases:
<ul><li>Se reemplazo el uso de $this-&gt;_lista_ef_post por $this-&gt;get_nombres_ef() (ya existia)
</li><li>$this-&gt;get_dependencias() para los casos que se usaba $this-&gt;_dependencias
</li><li>$this-&gt;get_cantidad_dependencias() para el count($this-&gt;_dependencias)
</li><li>$this-&gt;get_cantidad_efs() para el count($this-&gt;lista_ef_post)
</li></ul></li><li>Refactorizacion del API de toba_memoria (Solucion de <a class="closed ticket" href="../../../../external.html?link=https://localhost/trac/toba/ticket/498" title="get_dato_aplicacion tiene que funcionar cross celda (closed)">#498</a> y <a class="closed ticket" href="../../../../external.html?link=https://localhost/trac/toba/ticket/507" title="toba::memoria()-&gt;set_dato_instancia() para mantener informacion  ... (closed)">#507</a>). Existen 3 scopes de memoria:
<ul><li>set_dato_operacion: La variable vive dentro de la ejecucion de una operacion
</li><li>set_dato: La variable vive durante la sesion del proyecto.
</li><li>set_dato_instancia: La variable puede utilizarse para comunicar sesiones distintas de proyectos ejecutados en el mismo nucleo.
</li></ul></li><li>Los 3 niveles se completan con las primitivas: get_dato*, eliminar_dato*, existe_dato*, limpiar_datos* (Donde * = operacion | instancia). 
</li></ul><ul><li>Comando para cambiar los permisos de las carpetas en unix.
</li><li>Solución de bugs en la sesión que hacian por ejemplo que no se pueda refrescar el item inicial o el re-login se tenga que hacer dos veces.
</li><li>Metodo de inicialización automática de sesiones extendidas cuando ya existe un usuario logueado en la instancia donde se ejecuta el proyecto. Se aplica la modificación en la relacion toba_editor / toba_instancia. La comunicación entre ambos en a través de toba::memoria()-&gt;get_dato_instancia();
</li></ul><h2 id="MigraciónManual">Migración Manual</h2>
<h2 id="Puntodeacceso">Punto de acceso</h2>
<p>
Los puntos de acceso (aplicacion.php, etc) deben invocar a toba de la siguiente forma:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php</span>

<span class="code-comment">//--------------------------------------------------------------------------
//------ Invocacion del nucleo del toba ------------------------------------
//--------------------------------------------------------------------------</span>
<span class="code-keyword">if (isset(</span><span class="code-lang">$_SERVER</span><span class="code-keyword">[</span><span class="code-string">'TOBA_DIR'</span><span class="code-keyword">])) {
    </span><span class="code-lang">$dir </span><span class="code-keyword">= </span><span class="code-lang">$_SERVER</span><span class="code-keyword">[</span><span class="code-string">'TOBA_DIR'</span><span class="code-keyword">].</span><span class="code-string">"/php"</span><span class="code-keyword">; 
    </span><span class="code-lang">$separador </span><span class="code-keyword">= (</span><span class="code-lang">substr</span><span class="code-keyword">(</span><span class="code-lang">PHP_OS</span><span class="code-keyword">, </span><span class="code-lang">0</span><span class="code-keyword">, </span><span class="code-lang">3</span><span class="code-keyword">) == </span><span class="code-string">'WIN'</span><span class="code-keyword">) ? </span><span class="code-string">";.;" </span><span class="code-keyword">: </span><span class="code-string">":.:"</span><span class="code-keyword">;
    </span><span class="code-lang">ini_set</span><span class="code-keyword">(</span><span class="code-string">"include_path"</span><span class="code-keyword">, </span><span class="code-lang">ini_get</span><span class="code-keyword">(</span><span class="code-string">"include_path"</span><span class="code-keyword">). </span><span class="code-lang">$separador </span><span class="code-keyword">. </span><span class="code-lang">$dir</span><span class="code-keyword">);
    </span><span class="code-lang">define</span><span class="code-keyword">(</span><span class="code-string">"apex_pa_ID"</span><span class="code-keyword">,</span><span class="code-lang">$_SERVER</span><span class="code-keyword">[</span><span class="code-string">'PHP_SELF'</span><span class="code-keyword">]);
    require_once(</span><span class="code-string">"nucleo/toba_nucleo.php"</span><span class="code-keyword">);
    </span><span class="code-lang">toba_nucleo</span><span class="code-keyword">::</span><span class="code-lang">instancia</span><span class="code-keyword">()-&gt;</span><span class="code-lang">acceso_web</span><span class="code-keyword">();        
} else {
    die(</span><span class="code-string">"Es necesario definir la variable 'TOBA_DIR' en el archivo de configuracion de apache
            (Utilize la directiva 'SetEnv')"</span><span class="code-keyword">);
}</span>
<span class="code-comment">//--------------------------------------------------------------------------</span>
<span class="code-lang">?&gt;</span>

</pre></div><h3 id="EventoprocesardelCI">Evento procesar del CI</h3>
<p>
A partir <a class="changeset" href="../../../../external.html?link=https://localhost/trac/toba/changeset/2472" title="Se saca la limpieza de memoria del procesamiento por defecto del CI, para  ...">[2472]</a> el <tt>evt__procesar</tt> del CI no posee más una llamada a la limpieza de la memoria del componente (<a class="closed ticket" href="../../../../external.html?link=https://localhost/trac/toba/ticket/524" title="Problemas con la acción predefinida del procesar (closed)">#524</a>). Aquellos evento procesar que llamaban al padre para realizar la limpieza deberan invocar explícitamente al método `disparar_limpieza_memoria. Por ej:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
 </span><span class="code-keyword">function </span><span class="code-lang">evt__procesar</span><span class="code-keyword">()
 {
     ..</span><span class="code-lang">Lógica propia de procesamiento</span><span class="code-keyword">...

     </span><span class="code-comment">//parent::evt__procesar()
     </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">disparar_limpieza_memoria</span><span class="code-keyword">();
 }</span>
<span class="code-lang">?&gt;</span>

</pre></div><h3 id="EventosenJavascript">Eventos en Javascript</h3>
<p>
Por error en las versiones anteriores del motor javascript de toba cuando se ejecutaba un listener de un evento javascript se asumía que toda respuesta distinta de <tt>true</tt> era false, inclusive la no-respuesta. A partir de la nueva versión el proceso de submit se paraliza si explícitamente se retorna false en alguno de estos métodos (similar a lo que hace javscript con sus eventos propios <tt>OnTalCosa</tt>).
</p>
<p>
En caso de que se hayan extendido eventos en javascript y se halla querido controlar el proceso de submit se debe asegurar que tenga un <tt>return false</tt> explícito para parar el proceso de submit.
</p>
<h3 id="Cursorendatos_tabla">Cursor en datos_tabla</h3>
<p>
La API get/set del datos tabla solo trabaja sobre el cursor de la tabla. Anteriormente por más que la tabla manejara muchos registros si casualmente sólo se cargaba uno, el cursor se posicionaba sobre este. Esto cambiaba el comportamiento de la clase según la cantidad de registros que haya en la base, dejando prácticamente inusable el sentido del cursor. En esta versión el cursor sólo se posiciona automáticamente si explícitamente se dice que la tabla maneja un único registro cargado (Max. Filas).
</p>
<p>
Aquellas tablas que asumían este comportamiento pero no tienen definida en uno la cantidad máxima de filas, la relación lanzará este error:
</p>
<pre class="wiki"> No hay posicionado un cursor en la tabla, no es posible determinar la fila actual
</pre><p>
Para prevenir esto es necesario recorrer los datos_relacion buscando aquellas tablas que se asumen que tienen un único registro y explicitándolo.
</p>
<h3 id="EstaCargada">Esta Cargada?</h3>
<p>
En el api del datos_relacion se cambio el metodo <i>esta_cargado</i> por <i>esta_cargada</i> (porque la relación esta o no <strong>cargada</strong>)
</p>
<h2 id="Versiones1.0">Versiones 1.0</h2>
<p>
A continuación un detalle de los cambios realizados en la rama 1.0 luego de su lanzamiento:
<h3 id="a1.0.6">1.0.6</h3>
<ul><li>Se le agrego al ef_fieldset el tag &lt;legend&gt; para que muestre la etiqueta en la parte superior.
</li><li>Cuadro: El metodo set_eof_mostrar estaba trabajando de manera no intuitiva (osea logica negativa), se corrigio para que el parametro responda al comportamiento.
</li><li>Cuadro: No estaba sacando las sumas acumuladas en la parte inferior para la vista previa HTML
</li><li>Cuadro: Los contenidos personalizados de usuario en el pie del corte de control ahora reciben el parametro es_ultimo que marca el ultimo corte.
</li></ul><p>
  
</p>
<h3 id="a1.0.7">1.0.7</h3>
<ul><li>Cuadro: Método <tt>set_excel_usar_formulas(booleano)</tt>, para cubrir casos en que la formula supere el maximo que soporta excel (al parecer 1024 caracteres), aprox. unas 4000 filas con cortes. En estos casos se usa directamente el valor total calculado en php.
</li></ul><h3 id="a1.0.8">1.0.8</h3>
<ul><li>Clase para el manejo del esquema de auditoria
</li><li>El formato fecha del cuadro busca la existencia de un hora y la parsea
</li><li>Nuevas consultas de metadatos de postgres en la conexión
</li><li>Arreglo que permite agregar dinámicamente una dependencia en un pedido de página en la etapa de configuración
</li><li>Bug en la creación dinámica de columnas del cuadro
</li></ul><p>
 
</p>
<h3 id="a1.0.9">1.0.9</h3>
<ul><li>Bug en la migración del esquema de personalizacion
</li></ul><h3 id="a1.0.10">1.0.10</h3>
<ul><li>Se agrega el parametro opcional "no_borrar" para el metodo "procesar_anidado".
</li></ul>
</p>
</div>
   </div>
   
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/1.0.4?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../../external.html?link=https://localhost/trac/toba/about"><strong>Trac 0.10.3</strong></a><br />
  By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por el SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>



 </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>

