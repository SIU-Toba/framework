<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
 <title>Versiones/1.3.0 - SIU-Toba - Trac</title><link rel="start" href="../../wiki.html" /><link rel="search" href="../../../../external.html?link=https://localhost/trac/toba/search" /><link rel="help" href="../TracGuide.html" /><link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/1.3.0?format=txt" title="Plain Text" type="text/x-trac-wiki" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}

/* trac php syntax highlighting */
.code-block {
    line-height: 1em;
    font-family: Courier, monotype;
    font-size: 12px;
    }
.h_question { color: #0000BB; } /* highlight.default */
.hphp_commentline { color: #FF8000; } /* highlight.comment */
.hphp_operator { color: #007700; } /* highlight.keyword */
.hphp_word { color: #007700; } /* highlight.keyword */
.hphp_default {}
.hphp_variable { color: #0000BB; } /* highlight.default */
.hphp_hstring { color: #DD0000; } /* highlight.string */
.hphp_simplestring { color: #DD0000; } /* highlight.string */
.h_tagunknown {}
.h_default {}

.code-keyword { color: #007700; font-weight: normal; }
.code-lang { color: #0000BB; font-weight: normal; }
.code-comment { color: #FF8000; font-weight: normal;}
.code-string { color: #DD0000; font-weight: normal;}

pre { padding:0; margin: 0}

.tablas-screenshots td:first-child { background-color: #D5CECD; width: 30%}
.tablas-screenshots table { width: 90%; border: 1px solid gray; }
.tablas-screenshots td { }
.tablas-screenshots table.wiki td { border: 1px solid gray; }

#tkt-changes-hdr {
    clear: both;
    padding-top: 30px;
}
.wiki-toc {
    clear: right;
    min-width: 160px;
    background-color:#F7F7F7;    
    border: 1px solid #D7D7D7;
}
.wiki-toc .active {
    background-color: #890C71;
    padding: 1px;
}
.wiki-toc .active a {
    color:white; 
}
.wiki-toc .active a:hover {
    background-color:  #890C71;
}
.indice-general {
/*    background-color: #FFFFDD;*/
}
.wikipage h1 {
    padding-top: 5px;
}
.wikipage h2 {
 padding: 2px;
}
.wikipage h1 {
    font-size: 28px;
}
.wikipage h2 {
    background-color: #890C71;
    color: white;
    padding-left: 10px;
    margin-top: 30px;
    font-size: 100%;
    border: 1px solid gray;
}
.wikipage h3 {
    font-size:100%;
}
li {
    margin-bottom:4px;
}
li * {
    margin-bottom:0;
}
/*a {
 color: #890C71;
}*/
@media print {
 .wiki-toc { display: none }
}
#tkt-changes-hdr, .tkt-chg-list { 
    font-size:80%;
    text-align:right;
}

</style>
 <script type="text/javascript" src="../../chrome/common/js/trac.js"></script>
</head>

			<body>
			<table border='0' cellspacing='0' cellpadding='0' height='48' width='100%'>
			  <tr>
			
				<td class='header-top-left'><img src='../../../../../api/media/logo.png' border='0'/></td>
			    <td class='header-top-right'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/wiki.png' />
			    	<a href='../../../../../api/index.html'  title='Navegar hacia la documentación PHP'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/php-small.png' /></a> 
			    	<a href='../../../../../api_js/index.html'  title='Navegar hacia la documentación Javascript'>    		
			    	<img border='0' style='vertical-align: middle' src='../../../../../api/media/javascript-small.png' /></a>
			  </tr>
			
			  <tr>
			    <td colspan='2' class='header-menu'>
			  		  [ <a href='http://desarrollos2.siu.edu.ar/trac/toba/wiki/Versiones/1.3' title='El sitio online contiene contenidos mas detallados y actualizados'
						class='menu'>Ver online</a> ]
			    </td>
			
			  </tr>
			  <tr><td colspan='2' class='header-line'><img src='../../../../../api/media/empty.png' width='1' height='1' border='0' alt=''  /></td></tr>
			</table>
		


<div id="banner">

<div id="header"><a id="logo" href="../../../../external.html?link=https://localhost/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../../external.html?link=https://localhost/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../../external.html?link=https://localhost/trac/toba/login">Login</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/settings">Settings</a></li><li><a accesskey="6" href="../TracGuide.html">Help/Guide</a></li><li class="last"><a href="../../../../external.html?link=https://localhost/trac/toba/about">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a accesskey="1" href="../../wiki.html">Wiki</a></li><li><a accesskey="2" href="../../../../external.html?link=https://localhost/trac/toba/timeline">Timeline</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/browser">Browse Source</a></li><li class="last"><a accesskey="4" href="../../../../external.html?link=https://localhost/trac/toba/search">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
   <li><a href="../../wiki.html">Start Page</a></li>
   <li><a href="../TitleIndex.html">Index by Title</a></li>
   <li><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/RecentChanges">Index by Date</a></li>
   <li class="last"><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/1.3.0?action=diff&amp;version=38">Last Change</a></li>
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   
   <div class="wikipage">
    <div id="searchable"><h1 id="CambiosVersión1.3">Cambios Versión 1.3</h1>
<ul><li>Fecha: xx/03/09
</li><li>Rama con actualizaciones: <a class="source" href="../../../../external.html?link=https://localhost/trac/toba/browser/trunk_versiones/1.3">source:trunk_versiones/1.3</a>
</li><li>Revisiones trunk involucradas: <a class="changeset" href="../../../../external.html?link=https://localhost/trac/toba/changeset/3486" title="Trunk: Cuando se crea el proyecto se le da por defecto version 1.0.0">[3486]</a> a [xxxx]
</li></ul><h2 id="MejorasdeSeguridad">Mejoras de Seguridad</h2>
<ul><li>Ataques inyección SQL: Se revisaron todas las consultas ejecutadas por el núcleo para evitar vulnerabilidades. De todas formas la mayoría de las consultas/comandos SQL son ejecutados por el proyecto, por lo que recomendamos en toda función que realiza una consulta o comando SQL y reciba parámetros que influyan en el armado del mismo, usar alguna de las siguientes técnicas:
<ul><li><i>Quotear</i> todos los parámetros. Es la forma más similar a como se venía trabajando, tener en cuenta que el quote siempre agrega comillas por lo que no debemos agregarlas en la SQL:
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">consultar</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">)
    {    
        </span><span class="code-lang">$datos </span><span class="code-keyword">= </span><span class="code-lang">quote</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">);
        </span><span class="code-lang">$sql </span><span class="code-keyword">= </span><span class="code-string">"
            SELECT a,b,c FROM tabla
            WHERE
                        x = {$datos['x']}
                AND    y = {$datos['y']}
        "</span><span class="code-keyword">;
        return </span><span class="code-lang">toba</span><span class="code-keyword">::</span><span class="code-lang">db</span><span class="code-keyword">()-&gt;</span><span class="code-lang">consultar</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">);
    }</span>
<span class="code-lang">?&gt;</span>

</pre></div></li><li>Usar sentencias preparadas. Es la forma más segura pero requiere modificar más radicalmente las consultas y comandos.
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">consultar</span><span class="code-keyword">(</span><span class="code-lang">$datos</span><span class="code-keyword">)
    {    
        </span><span class="code-lang">$sql </span><span class="code-keyword">= </span><span class="code-string">"
            SELECT a,b,c FROM tabla
            WHERE
                    x=:x
                AND    y=:y
        "</span><span class="code-keyword">;
        </span><span class="code-lang">$sentencia </span><span class="code-keyword">= </span><span class="code-lang">toba</span><span class="code-keyword">:</span><span class="code-lang">db</span><span class="code-keyword">()-&gt;</span><span class="code-lang">sentencia_preparar</span><span class="code-keyword">(</span><span class="code-lang">$sql</span><span class="code-keyword">);
        return </span><span class="code-lang">toba</span><span class="code-keyword">::</span><span class="code-lang">db</span><span class="code-keyword">()-&gt;</span><span class="code-lang">sentencia_consultar</span><span class="code-keyword">(</span><span class="code-lang">$sentencia</span><span class="code-keyword">, </span><span class="code-lang">$datos</span><span class="code-keyword">);
    }</span>
<span class="code-lang">?&gt;</span>

</pre></div></li></ul></li><li>Ataques XSS: Además de incluir requisitos en la configuración de PHP durante la instalación gráfica, se filtra las salida tanto en los efs de formularios como en columnas del cuadro, para sanear las salidas HTML (usando la función htmlentities). Se incluyeron tildes 'incluir_html' en efs y cuadro. Para compatibilidad hacia atras, se agrega una migracion para que los ef-fijos sigan permitiendo salidas html, en este caso el proyecto es responsable de sanear las cadenas provenientes de la base usando la función <tt>texto_plano($cadena)</tt>
</li><li>Robo de sesiones: Hasta ahora el tiempo de no-interacción de la sesión de un usuario para proyectos toba creados con las opciones por defecto, dependía exclusivamente de la configuración de PHP. La misma por lo general tiene sin-limite (mejor dicho 'hasta que el navegador se cierre', en la directiva <tt>session.cookie_lifetime</tt>). Con lo cual lo usual en la práctica es que el tiempo de no-interacción de un usuario no tenga límites y facilite el robo de las sesiones. A partir de esta versión se incluye un valor de 30 minutos para la configuración <strong>Sesión - Tope no interaccion</strong> tanto para la creación de nuevos proyecto como para aquellos creados que no tenían definida este atributo. Si durante estos minutos el usuario no interactua con el sistema, al hacerlo se le pedira que reingrese sus credenciales.
</li><li>Acceso a información no-autorizada:  A partir de esta versión se controla que la selección de elementos de un cuadro pertenezca a las filas que se mostraron, evitando que mediante manipulación del proceso de submit se ingrese a datos no autorizados. Esto es muy importantes para la seguridad de los perfiles de datos.
</li></ul><h2 id="Instalador">Instalador</h2>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Versiones/1.3.0/instalador.html"><img width="500px" style="float:right" src="../../attachment/wiki/Versiones/1.3.0/instalador41f0.png?format=raw" /></a>
Desde las últimas versiones de la rama 1.2 y ahora oficialmente en todas las versiones de la rama 1.3 se encuentra disponible el uso del nuevo instalador gráfico de aplicaciones toba. El proceso de generar un instalable (llamado 'empaquetar' un proyecto) está detallado como una <a class="wiki" href="../Referencia/Deployment.html#PasajeDesarrollo-Producciónusandoinstaladorgráfico">nueva forma de deployment</a>. Algunos detalles de sus funcionalidades:
</p>
<ul><li>Permite generar un paquete instalable listo para distribuir, sin pasos manuales, ejecutando sólo un comando administrativo <tt>toba proyecto empaquetar</tt>
</li><li>El instalador en sí asume la instalación previa de la pila Apache-Php-Postgres (ayudados por el <a class="ext-link" href="../../../../external.html?link=http://infotec.siu.edu.ar/"><span class="icon">foro infotec</span></a>). La idea es que el usuario publique el instalador en una carpeta navegable y a partir de allí no require ningún instructivo
</li><li>Asegura ciertas premisas de seguridad y performance en la implementación. Por ejemplo creación de un usuario postgres propio para la conexión (evitando usar el superusuario), asegurar directivas mínimas de seguridad en la configuración de php (ocultar errores internos, no permitir el robo de cookies, etc.), <i>compilación</i> de metadatos, exclusión de los proyectos internos como toba_referencia, etc.
</li></ul><div style="clear:both"></div>
<h2 id="Basededatos">Base de datos</h2>
<ul><li>Nuevos parámetros de bases.ini:
<ul><li><i>schema</i>:  Si esta presente se cambia el SEARCH_PATH ni bien realizada la conexion. Permite tener a toba y el proyecto en la misma base de datos postgres.
</li><li><i>encoding</i>: Si esta presente se cambia el CLIENT_ENCODING ni bien realizada la conexion 
</li></ul></li><li>Se fija el <tt>datestyle</tt> de la conexión a modo ISO (y-m-d), para evitar errores en otras configuraciones (pasa seguido con postgres 8.3).
</li><li>Mejoras al API de manejo de sentencias preparadas de la clase <tt>toba::db()</tt>. Quedan así:
<ul><li><tt>sentencia_preparar</tt>: Dada una SQL retorna un identificador a usar en el resto de los servicios
</li><li><tt>sentencia_ejecutar</tt>: Ejecuta la sentencia y devuelve la cantidad de registros afectadas por la misma.
</li><li><tt>sentencia_consultar</tt>: Ejecuta la sentencia y devuelve los datos recuperados
</li><li><tt>sentencia_consultar_fila</tt>: Ejecuta la sentencia y retorna la primer fila encontrada
</li><li><tt>sentencia_cantidad_afectados</tt>: Devuelve la cantidad de registros afectados por la sentencia.
</li><li><tt>sentencia</tt>: Venía desde antes de esta versión, es la combinación de <tt>sentencia_preparar</tt> con <tt>sentencia_consultar</tt>
</li></ul></li><li>Esquema de auditoría:
<ul><li>El comando <tt>toba proyecto crear_auditoria</tt> en caso de que el esquema exista lo migra, agregando tablas y columnas faltantes.
</li><li>Bug en el orden de inicio de la sesion y el contexto de ejecucion, no permitia guardar el usuario actualmente logueado en la tabla temporal y tiraba un error critico en el log
</li><li>Bug al eliminar un registro, no se tenia en cuenta el prefijo <tt>logs_</tt> de las tablas 
</li><li>Se agrega un campo id_solicitud a la auditoria, que permite vincular con la tabla de solicitudes/sesiones. Aquellos proyectos que utilizan la auditoria, deben modificar la tabla temporaria creada durante el inicio de la ejecucion para incluir la nueva columna. Tomar como ejemplo el de <a class="source" href="../../../../external.html?link=https://localhost/trac/toba/browser/trunk/proyectos/toba_referencia/php/extension_toba/toba_referencia_fuente_datos.php">toba_referencia</a>
</li></ul></li><li>Durante el parseo de errores postgres, se trata de averiguar el locale de los mensajes, ya que entre los mensajes en inglés y castellano cambian los caracteres utilizados y se rompía el parseo.
</li><li>El esquema de perfiles de datos maneja N fuentes. La entrada estandar pasa a se <tt>toba::perfil_de_datos()-&gt;filtrar($sql, $fuente=null)</tt> y toma por defecto la fuente predeterminada. 
</li><li>Componente datos_tabla:
<ul><li>La generacion de las sentencias UPDATE no controlaba si un campo es booleano. 
</li><li>Se evita el control de valores unicos reiteradamente en el alta y modificación, ahora se hace al sincronizar. Se toma el mismo comportamiento para los controles de tope_maximo_filas y tope_minimo_filas, se hacen al sincronizar. 
</li></ul></li></ul><h2 id="Formulario">Formulario</h2>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Versiones/1.3.0/ef_combo_editable.html"><img src="../../attachment/wiki/Versiones/1.3.0/ef_combo_editable41f0.png?format=raw" style="float:right" /></a>
</p>
<ul><li>Nuevo <tt>ef_combo_editable</tt> (colaboración Jorge de Guaraní). Permite selección gradual de un elemento entre un gran conjunto de datos, con búsqueda progresiva AJAX (suggest). Ejemplos en toba_referencia
</li><li>Posibilidad de modificar el layout del form en impresion de forma similar a la salida html clasica 
</li><li>El <tt>ef_html</tt> permite colapsar su toolbar
</li><li>Posibilidad de estilizar el ef-html cuando esta solo lectura. Bug del ef-html en opera al intentar obtener su estado 
</li><li>Al desactivarse via API un ef que participa de una cascada, se actualizan sus relaciones (si es un esclavo, el maestro no trata de actualizarlo).
</li></ul><div style="clear:both"></div>
<h2 id="FormularioML">Formulario ML</h2>
<ul><li>Se agrega botonera de exportacion a excel y pdf usando métodos <tt>$ml-&gt;set_exportar_excel</tt> y <tt>$ml-&gt;set_exportar_pdf</tt>.
</li><li>Se incluye la posibilidad de mantener registro de sus cambios en el cliente para poder activar/desactivar botones según si se modificó o no algún valor. Es un poco más costoso que en el form. común ya que se examina por filas y campos tanto cuando cambia un ef como cuando se agrega/quita una fila. 
</li><li>Método javascript <tt>ml.eliminar_filas()</tt> que borra todas las filas.
</li><li>Mejoras a la performance de sumarizaciones en javascript para cantidades importantes de filas. Se logra dividiendo el procesamiento de todos los efs y el calcular los totales al agregar una nueva fila, esto permite procesar solo el ef que se esta agregando y aun asi seguir calculando los totales de una columna.
</li><li>Se puede escuchar la configuración de una fila especifica en el CI contenedor del ml, esto permite por ejemplo setear campos solo lectura a determinadas filas o anular eventos a nivel de fila:
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-comment">/**
     * Se configura una fila especifica del ML
     */
    </span><span class="code-keyword">function </span><span class="code-lang">conf_fila__</span><span class="code-keyword">&lt;</span><span class="code-lang">componente</span><span class="code-keyword">&gt;(</span><span class="code-lang">$fila</span><span class="code-keyword">) 
    {
        if (isset(</span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">datos_facturas</span><span class="code-keyword">[</span><span class="code-lang">$fila</span><span class="code-keyword">])) {
            if (</span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">datos_facturas</span><span class="code-keyword">[</span><span class="code-lang">$fila</span><span class="code-keyword">][</span><span class="code-string">'importe_nc'</span><span class="code-keyword">] &gt; </span><span class="code-lang">0</span><span class="code-keyword">) {
                </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dep</span><span class="code-keyword">(&lt;</span><span class="code-lang">componente</span><span class="code-keyword">&gt;)-&gt;</span><span class="code-lang">evento</span><span class="code-keyword">(</span><span class="code-string">'crear_nc'</span><span class="code-keyword">)-&gt;</span><span class="code-lang">ocultar</span><span class="code-keyword">();
                </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dep</span><span class="code-keyword">(&lt;</span><span class="code-lang">componente</span><span class="code-keyword">&gt;)-&gt;</span><span class="code-lang">ef</span><span class="code-keyword">(&lt;</span><span class="code-lang">campo</span><span class="code-keyword">&gt;)-&gt;</span><span class="code-lang">set_solo_lectura</span><span class="code-keyword">(</span><span class="code-lang">true</span><span class="code-keyword">);
            } else {
                </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dep</span><span class="code-keyword">(&lt;</span><span class="code-lang">componente</span><span class="code-keyword">&gt;)-&gt;</span><span class="code-lang">evento</span><span class="code-keyword">(</span><span class="code-string">'crear_nc'</span><span class="code-keyword">)-&gt;</span><span class="code-lang">mostrar</span><span class="code-keyword">();
                </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dep</span><span class="code-keyword">(&lt;</span><span class="code-lang">componente</span><span class="code-keyword">&gt;)-&gt;</span><span class="code-lang">ef</span><span class="code-keyword">(&lt;</span><span class="code-lang">campo</span><span class="code-keyword">&gt;)-&gt;</span><span class="code-lang">set_solo_lectura</span><span class="code-keyword">(</span><span class="code-lang">false</span><span class="code-keyword">);
            }    

    }</span>

<span class="code-lang">?&gt;</span>

</pre></div></li></ul><h2 id="Cuadro">Cuadro</h2>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Versiones/1.3.0/grupo_columnas.html"><img src="../../attachment/wiki/Versiones/1.3.0/grupo_columnas41f0.png?format=raw" style="float:right" /></a>
</p>
<ul><li>Agrupación de títulos de columnas del cuadro. Se puede agrupar editando el cuadro e indicando grupos similares en columnas adyacentes. Alternativamente por API con el método <tt>$cuadro-&gt;set_grupo_columnas($grupo, $columnas)</tt>
</li><li>Se agrega un método para chequear si una columna o un conjunto de ellas existen en la definición del cuadro (simil de toba_ei_formulario::existe_ef)
</li><li>El total de registros se muestra independientemente de si el cuadro está o no paginado. Esta funcionalidad se activa vía CSS
<div style="clear:both"></div>
</li></ul><h2 id="Varios">Varios</h2>
<p>
<a style="padding:0; border:none" href="../../attachment/wiki/Versiones/1.3.0/capa-espera.html"><img width="500px" style="float:right" src="../../attachment/wiki/Versiones/1.3.0/capa-espera41f0.png?format=raw" /></a>
</p>
<ul><li>Nueva configuración <i>Demora cartel espera</i>, indica la cantidad de milisegundos que tarda en mostrarse automáticamente un cartel de 'Aguarde por favor', útil para dar un feedback visual en operaciones que tardan mucho tiempo.
</li><li>Los CNs pueden contener CNs como dependencias. 
</li><li>Mejoras a la robustez de los perfiles funcionales:
<ul><li>Pantallas no-visibles: Quita el registro del evento en php que permite navegar al mismo, con lo cual es seguro que el usuario no puede navegarla y permite mantener la lógica js. En caso de que el programador en PHP explicitamente navegue hacia la pantalla se lanza una excepción. Se tiene en cuenta el caso wizard
</li><li>Eventos no-visibles: Se oculta el evento y se le quita el registro en la sesion, haciendo que no sea posible ejecutarlo pero si respeta la logica js existente
</li><li>El evento de cambio de tabs se maneja en php al igual que el resto de los eventos
</li><li>Caso de prueba manual en toba_testing 
</li></ul></li><li>En la impresión html se oculta el menú, botones de edición y el encabezado del usuario. 
</li><li>Los autovínculos (urls que apuntan a la misma operación en la que estoy parado) no limpian la memoria, para lograr este efecto indicar la opción <tt>array('menu' =&gt; 1)</tt> en el método <tt>get_url</tt>
</li><li>Nueva excepcion toba_error_seguridad, la información que se le pasa la guarda al logger y da un mensaje generico al usuario 
</li><li>Al desloguearse de un proyecto, se elimina la sesión de la instancia. Asi como en el login el usuario 'se abre' a toda la instancia, cuando se desloguea espera hacerlo de toda la instancia también.
<div style="clear:both"></div>
</li></ul><h2 id="NuevasAPIs">Nuevas APIs</h2>
<ul><li>Se crean ventanas para que los proyectos que necesiten extender el esquema de login puedan extender también el esquema de bloqueos de usuarios e ips. Disponibles a través de la <a class="wiki" href="../../../../external.html?link=https://localhost/trac/toba/wiki/Referencia/Login">extensión de la clase de usuarios</a>
</li><li>Se incluye en contrib un catalogo para armar un arbol a partir de una carpeta de operaciones. Permite formar un menú alternativo con un componente ei_arbol (ver opción configuración de mapuche
</li><li>Se incluye en contrib una librería para manejo de procesos en el sistema operativo. Útilizado por ejemplo para disparar procesos de importación/exportación en segundo plano.
</li><li>Se incorpora al api de la solicitud el metodo <tt>tipo_pagina()</tt> para poder acceder al objeto y modificarlo por api. 
</li><li>En los javascript de efs, cuando se pasa un set_estado(null) los combos y editables tiraban error de javascript, se asume que esto es sinonimo de resetear_estado, lo interesante de permitir esto es que por ejemplo el pasaje via ajax de datos desde la base es directo, evitando tener que poner un adaptador.
</li><li>Nuevo método del ef_fecha en javascript para setearle la fecha a partir de un objeto Date
</li><li>Clase <a href='../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/Centrales/toba_mail.html#' title='Navega hacia la documentacion PHP'><img style='vertical-align:middle' src='../../../../toba_editor_trunk/doc/api/media/php-small.png' /> toba_mail</a>, Posibilidad de enviar mails html. Actualización phpmailer a version 2.2 
</li><li>Esquema de planificacion de tareas. Las tareas y logs de tareas se exportan a la instancia local, usar <a href='../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/Centrales/toba_planificador_tareas.html#' title='Navega hacia la documentacion PHP'><img style='vertical-align:middle' src='../../../../toba_editor_trunk/doc/api/media/php-small.png' /> toba::planificador_tareas()</a>.
</li><li>API para agregar/quitar operaciones al menú desde PHP:
<pre class="wiki">toba::menu()-&gt;agregar_opcion(array('nombre' =&gt; 'Prueba'));
toba::menu()-&gt;quitar_opcion(3292); 
</pre></li><li>Forma de atrapar el acceso a menú via javascript, permite por ejemplo detener el cambio de operación:
<pre class="wiki">function callback_menu(proyecto, operacion, url, es_poup) {
	return confirm('Esta a punto de abandonar la edición sin grabar, ¿Desea continuar?');
}
toba.set_callback_menu(callback_menu);
</pre></li><li>Mejoras a API de notificaciones:
<ul><li>Metodos js agregar_notificacion y limpiar_notificaciones en los eis
</li><li>Método php <tt>$componente-&gt;agregar_notificacion</tt> que agrega el mensaje en la barra superior (similar al descripcion de la pantalla)
</li></ul></li><li>Clase <tt>toba_mensajes</tt>
<ul><li><tt>get_operacion_actual</tt>: retorna el mensaje de ayuda asociado a la operación. Si la misma contiene sólo una URL el botón de ayuda no muestra un tooltip sino que se convierte en un link.
</li><li><tt>set_fuente_ini</tt>: Determina que los mensajes surgirán desde un archivo .ini y no desde los metadatos. En el .ini debe figurar una sección <tt>[operaciones]</tt> con un listado <tt>id_operacion = url | mensaje</tt> . 
</li></ul></li><li>Al ei_arbol se le puede incluir un filtro inline por nombre <tt>$filtro-&gt;set_mostrar_filtro_rapido(true)</tt> 
</li><li>Al ei_filtro se le puede indicar una columna solo-lectura: <tt>$filtro-&gt;columna('tal')-&gt;set_solo_lectura()</tt>
</li></ul><h2 id="AdministraciónyEdicióndelproyecto">Administración y Edición del proyecto</h2>
<ul><li>La extensión de código de los componentes se hace con un asistente, permite generar la cáscara de métodos aún cuando el archivo y la clase se encuentren creados. 
</li><li>La visualización de código permite hacer un blame, add, delete y ver el estado svn actual del archivo 
</li><li>Operacion de prueba de dimensiones. Modificación del esquema para permitir que el testeo se pueda realizar tambien por API, en el caso que un proyecto desee hacer un testeo automatico de los perfiles de datos.
</li><li>Posibilidad de deshabilitar la aplicación de restricciones funcionales de algunos efs puntuales.
</li><li>En la definición de eventos con vinculos, es posible definir el tipo de servicio a generar (antes siempre era generar_html), posibilitando definir auto-vinculos con otros servicios, como por ejemplo para una salida en otro formato no html.
</li><li>La regeneración de la instancia (<tt>toba instancia regenerar</tt>) trabaja en una transacción, ya no hace drop de la base sino solo del schema de metadatos. Por defecto el nombre del schema es el mismo que el de la instancia (desarrollo, producción etc.)
</li><li>Se modificó el proceso de instalación del framewok, ahora el id_desarrollador se pregunta durante la instalación, además funciona con instalacion postgres 8.3.  El proyecto toba_referencia se crea en un schema 'referencia' de la base de toba, lo mismo para el curso.
</li><li>Los perfiles de datos entran en el esquema de exportacion/carga desde archivos .xml en la instalacion (cuando el flag en_produccion esta encendido en instalacion.ini)
</li><li>Los logs de las operaciones de consola se guardan junto a los logs de los comandos (carpeta logs_comandos), para evitar conflictos con los permisos de los archivos (la consola generalmente lo ejecuta otro usuario-grupo distinto que el servidor apache)
</li><li>Al hacer un <tt>toba proyecto regenerar</tt> se perdía toda la información local del proyecto en la instancia (tareas, fotos del editor, parametros vista previa, etc). Se agrega una exportación local del proyecto previo a la regeneracion, que es lo que en general se quiere hacer
</li><li>Por defecto en la creación del proyecto se activa el <i>registro de solicitudes</i> detallando cada pedido de página (usuario,ip, operación, etc.)
</li><li>Se pasan las secuencias de serial a bigint, con los cual los id de desarrollador pueden ser un numero muy largo (9223372036854)
</li><li>Nuevo comando <tt>toba instalacion cambiar_id_desarrollador</tt>, permite cambiar el id en cuestión y actualizar las secuencias para que surja efecto el cambio.
</li><li>Nuevo comando <tt>toba proyecto borrar_auditoria</tt>
</li><li>Nuevo Comando <tt>toba proyecto ver_log</tt>, muestra una entrada del log (por defecto la ultima, si se pasa el modificador "-n" se puede acceder a una especifica) 
</li></ul><h2 id="Bugsimportantessolucionados">Bugs importantes solucionados</h2>
<ul><li>Corrección libreria Numbers_Words para uniformidad en el trato de decimales y correccion de algun error de representacion 
</li><li>Bug en la validación de extensiones del ef_upload. 
</li><li>Bug en el calculo de la diferencia entre registros de una tabla en una modificacion. No se estaban parseando los datos booleanos que vienen de la base.
</li><li>Bugs toba_usuarios:
<ul><li>La edicion perfiles de un usuario siempre es multi-proyecto, sino no habia forma de darle acceso al mismo proyecto toba_usuarios
</li><li>La edición de perfiles de datos guardaba los elementos activados de una dimension usando trim, se rompian en caso de definir la tabla con un char(x)
</li><li>No se podia eliminar la asociación de un usuario a un perfil de datos especifico 
</li></ul></li><li>Bugs varios relacionados con IE
</li></ul><p>
 
</p>
<h2 id="MigraciónManual">Migración Manual</h2>
<p>
Seguir los pasos normales de <strong><a class="wiki" href="../Versiones.html#Migraci%C3%B3ndeversiones">migración</a></strong> (la llamada 'migración automática'). Tener en cuenta además:
</p>
<ul><li>A partir de esta versión el <tt>evt__anterior</tt> del wizard no maneja datos (para por ejemplo poder volver pasos atrás sin hacer validaciones), antes sí manejaba, revisar si se explotaba esta funcionalidad.
</li><li>Se quito acceso al método <tt>toba::vinculador()-&gt;generar_solicitud</tt>, obsoleto desde la 0.8, usar get_url en su lugar. La forma de migrarlo es la siguiente:
<ul><li>Buscar las ocurrencias de <tt>-&gt;generar_solicitud</tt> en el sistema
</li><li>Dejar los primeros tres parámetros identicos
</li><li>Identificar cual es la función del resto de los parámetros (mirando la definición del generar_solicitud), ver si el valor es distinto al por defecto, formar un arreglo asociativo en su lugar y pasarlo como 4to parámetro. Por ejemplo si se se pasaba el parámetro menú en true, ahora debe formarse así <tt>array('menu' =&gt; true')</tt>
</li></ul></li><li>Había una falta de coherencia en el manejo de la celda-memoria en los vinculos definidos en el editor:
<ul><li>Para vinculos de eventos, si el vinculo era de popup siempre se enviaba a una celda-memoria popup, aún cuando definíamos lo contrario en el editor! 
</li><li>Para vínculos en columnas de un cuadro, cuando no figuraba la celda-memoria en los metadatos se usaba como celda el id de la columna (wait!)
</li><li>Ahora quedo de la siguiente manera:
<ul><li>Si uno no define una celda en el editor, se usa la actual (comportamiento igual al vinculador y todo el resto de la API)
</li><li>Si uno define que un vinculo de popup se 'sugiere' usar la celda popup, aunque uno manualmente lo puede cambiar 
</li></ul></li></ul></li></ul><h2 id="Versiones1.3">Versiones 1.3</h2>
<p>
A continuación un detalle de los cambios realizados en la rama 1.3 luego de su lanzamiento:
<div class="system-message"><strong>Error: Macro IncludeSource(/trunk_versiones/1.3/notas_version.txt) failed</strong><pre>No node /trunk_versiones/1.3/notas_version.txt at revision 3951</pre></div>
</p>
</div>
   </div>
   
    <h3 id="tkt-changes-hdr">Attachments</h3>
    <ul class="tkt-chg-list"><li class="tkt-chg-change"><a href="../../attachment/wiki/Versiones/1.3.0/instalador.html">instalador.png</a> (45.9 kB) - added by seba on 02/23/09 15:12:52.</li><li class="tkt-chg-change"><a href="../../attachment/wiki/Versiones/1.3.0/ef_combo_editable.html">ef_combo_editable.png</a> (3.3 kB) - added by seba on 02/23/09 15:25:17.</li><li class="tkt-chg-change"><a href="../../attachment/wiki/Versiones/1.3.0/grupo_columnas.html">grupo_columnas.png</a> (9.6 kB) - added by seba on 02/25/09 08:42:45.</li><li class="tkt-chg-change"><a href="../../attachment/wiki/Versiones/1.3.0/capa-espera.html">capa-espera.png</a> (25.2 kB) - added by seba on 03/09/09 15:48:13.</li>
    </ul>
  
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/1.3.0?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../../external.html?link=https://localhost/trac/toba/about"><strong>Trac 0.10.3</strong></a><br />
  By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por el SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>



 </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>

