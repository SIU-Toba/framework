<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
 <title>Versiones/Migracion0.9.0 - SIU-Toba - Trac</title><link rel="start" href="../../wiki.html" /><link rel="search" href="../../../../external.html?link=https://localhost/trac/toba/search" /><link rel="help" href="../TracGuide.html" /><link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../../external.html?link=https://localhost/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/Migracion0.9.0?format=txt" title="Plain Text" type="text/x-trac-wiki" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}

/* trac php syntax highlighting */
.code-block {
    line-height: 1em;
    font-family: Courier, monotype;
    font-size: 12px;
    }
.h_question { color: #0000BB; } /* highlight.default */
.hphp_commentline { color: #FF8000; } /* highlight.comment */
.hphp_operator { color: #007700; } /* highlight.keyword */
.hphp_word { color: #007700; } /* highlight.keyword */
.hphp_default {}
.hphp_variable { color: #0000BB; } /* highlight.default */
.hphp_hstring { color: #DD0000; } /* highlight.string */
.hphp_simplestring { color: #DD0000; } /* highlight.string */
.h_tagunknown {}
.h_default {}

.code-keyword { color: #007700; font-weight: normal; }
.code-lang { color: #0000BB; font-weight: normal; }
.code-comment { color: #FF8000; font-weight: normal;}
.code-string { color: #DD0000; font-weight: normal;}

pre { padding:0; margin: 0}

.tablas-screenshots td:first-child { background-color: #D5CECD; width: 30%}
.tablas-screenshots table { width: 90%; border: 1px solid gray; }
.tablas-screenshots td { }
.tablas-screenshots table.wiki td { border: 1px solid gray; }

#tkt-changes-hdr {
    clear: both;
    padding-top: 30px;
}
.wiki-toc {
    clear: right;
    min-width: 160px;
    background-color:#F7F7F7;    
    border: 1px solid #D7D7D7;
}
.wiki-toc .active {
    background-color: #890C71;
    padding: 1px;
}
.wiki-toc .active a {
    color:white; 
}
.wiki-toc .active a:hover {
    background-color:  #890C71;
}
.indice-general {
/*    background-color: #FFFFDD;*/
}
.wikipage h1 {
    padding-top: 5px;
}
.wikipage h2 {
 padding: 2px;
}
h1 {
    font-size: 28px;
}
.wikipage h2 {
    background-color: #890C71;
    color: white;
    padding-left: 10px;
    margin-top: 30px;
    font-size: 100%;
    border: 1px solid gray;
}
.wikipage h3 {
    font-size:100%;
}
.wikipage {
padding-right:10px;
}
li {
    margin-bottom:6px;
}
li * {
    margin-bottom:3px;
}
/*a {
 color: #890C71;
}*/
@media print {
 .wiki-toc { display: none }
}
#tkt-changes-hdr, .tkt-chg-list { 
    font-size:80%;
    text-align:right;
}

/** Cambios globales **/
#ctxtnav {
 /*display:none;*/
}
#mainnav {
 border: none;
 background: white;
 margin: 0;
 padding-top: 10px;
 padding-bottom: 35px;
border-bottom:1px solid #CCCCCC;

}
#mainnav li {
 border: 1px solid lightGray;
}
#header {
 display:none;
}
body {
    margin: 0;
    padding: 0;
      background-color:#F3F3F3;	    
}
#content {
clear: both;

}
#banner {
    background-color: white;
    padding-right:10px;
    padding-top:10px;
}

#mainnav .active :link, #mainnav .active :visited {
background:#890B72;
border-right:1px solid #000000;
border-top:medium none;
color:#EEEEEE;
font-weight:bold;
}
#mainnav :link, #mainnav :visited {
 border: none;
 background: transparent;
}
:link, :visited {
/* color: #1020EB;*/
/* color: #0C1BBC; */
 color: #67065D ;

}
#main {
 padding-left: 10px;
}
#footer {
 background-color: white;
 border-bottom: 1px solid;
}
</style>
 <script type="text/javascript" src="../../chrome/common/js/trac.js"></script>
</head>

			<body>
			<table border='0' cellspacing='0' cellpadding='0' height='48' width='100%'>
			  <tr>
			
				<td class='header-top-left'><img src='../../../../../api/media/logo.png' border='0'/></td>
			    <td class='header-top-right'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/wiki.png' />
			    	<a href='../../../../../api/index.html'  title='Navegar hacia la documentación PHP'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/php-small.png' /></a> 
			    	<a href='../../../../../api_js/index.html'  title='Navegar hacia la documentación Javascript'>    		
			    	<img border='0' style='vertical-align: middle' src='../../../../../api/media/javascript-small.png' /></a>
			  </tr>
			
			  <tr>
			    <td colspan='2' class='header-menu'>
			  		  [ <a href='http://desarrollos.siu.edu.ar/trac/toba/wiki/Versiones/Migracion0.9' title='El sitio online contiene contenidos mas detallados y actualizados'
						class='menu'>Ver online</a> ]
			    </td>
			
			  </tr>
			  <tr><td colspan='2' class='header-line'><img src='../../../../../api/media/empty.png' width='1' height='1' border='0' alt=''  /></td></tr>
			</table>
		

<script type="text/javascript" src="../../chrome/site/mootools.js"></script>
<script type="text/javascript" src="../../chrome/site/slimbox.js"></script>
<link rel="stylesheet" href="../../chrome/site/portada.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../chrome/site/slimbox.css" type="text/css" media="screen" />
<a style='position: absolute; top: 5px; left:5px;border-bottom:none !important;' href="../../../../external.html?link=https://localhost/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a>

<div id="banner">

<div id="header"><a id="logo" href="../../../../external.html?link=https://localhost/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../../external.html?link=https://localhost/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../../external.html?link=https://localhost/trac/toba/login">Login</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/settings">Settings</a></li><li><a accesskey="6" href="../TracGuide.html">Help/Guide</a></li><li class="last"><a href="../../../../external.html?link=https://localhost/trac/toba/about">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a accesskey="1" href="../../wiki.html">Wiki</a></li><li><a accesskey="2" href="../../../../external.html?link=https://localhost/trac/toba/timeline">Timeline</a></li><li><a accesskey="3" href="../../../../external.html?link=https://localhost/trac/toba/roadmap">Roadmap</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/browser">Browse Source</a></li><li><a href="../../../../external.html?link=https://localhost/trac/toba/query">View Tickets</a></li><li><a accesskey="7" href="../../../../external.html?link=https://localhost/trac/toba/newticket">New Ticket</a></li><li class="last"><a accesskey="4" href="../../../../external.html?link=https://localhost/trac/toba/search">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
   <li><a href="../../wiki.html">Start Page</a></li>
   <li><a href="../TitleIndex.html">Index by Title</a></li>
   <li><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/RecentChanges">Index by Date</a></li>
   <li class="last"><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/Migracion0.9.0?action=diff&amp;version=24">Last Change</a></li>
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   
   <div class="wikipage">
    <div id="searchable"><h1 id="InstructivodeMigraciónhacia0.9.0">Instructivo de Migración hacia 0.9.0</h1>
<h2 id="MigracióndeMETADATOS">Migración de METADATOS</h2>
<p>
La versión 0.9 implica un cambio radical en la forma en que los metadatos se almacenan en el sistema de archivos y por ende en los scripts administrativos que los manipulan. 
</p>
<h3 id="a1.Antesquenada">1. Antes que nada</h3>
<p>
Exportar los metadatos existentes y backupearlos en el SVN del proyecto. Esta es la ultima vez que se usan los comandos administrativos viejos.
</p>
<h3 id="a2.Checkout">2. Checkout</h3>
<p>
Hacer un checkout de la nueva versión de toba.
</p>
<h3 id="a3.MigrarlaInstalacióncompleta.">3. Migrar la Instalación completa.</h3>
<p>
En las versiones anteriores había una idea acoplada de lo que era la definición de las bases de datos disponibles con la definición de una instancia todo mezclado en el archivo <i>instancias.php</i>. Ahora la definición de las bases reside en el archivo <tt>$toba_dir/instalacion/bases.ini</tt> y la definición de la instancia X se encuentra en la carpeta <tt>$toba_dir/instalacion/i__X</tt>. Prueba de este acoplamiento es que no todas las definiciones del archivo instancias.php correspondían a instancias sino que también existían definiciones de bases de negocio. 
</p>
<p>
La migración se dispara con el comando
</p>
<pre class="wiki">toba instalacion migrar
</pre><p>
La primer pregunta se refiere al "ID del grupo de desarrollo", esto ayuda a que el trabajo de un grupo en un proyecto desarrollado en forma distribuida no afecte al trabajo de otro grupo, ver la convención en <a class="wiki" href="../Referencia/CelulaDesarrollo.html">Grupos de desarrollo</a>. Luego va a preguntar por cada definición existente si corresponde a un <i>instancia TOBA</i>o no, todas las definiciones irán a parar al archivo <tt>$toba_dir/instalacion/bases.ini</tt> y por cada respuesta afirmativa se creará una carpeta <tt>$toba_dir/instalacion/i__X</tt> con definiciones básicas dentro. 
</p>
<p>
Luego de esto se intenta migrar todas las instancias de la instalación y los proyecto contenidos dentro de esta instancia.
</p>
<p>
Una vez migradas las definiciones se puede ver el resultado con el comando
</p>
<pre class="wiki">toba instancia info
</pre><p>
Un paso opcional al finalizar la migración es borrar o renombrar el archivo obsoleto <i>$toba_dir/php/instancias.php</i>. Es una buena idea mirar el contenido creado en la carpeta <i>$toba_dir/instalacion</i> para entender la nueva disposición de archivos.
</p>
<h3 id="a4.Exportarlosproyectosconelnuevoformato">4. Exportar los proyectos con el nuevo formato</h3>
<p>
Los metadatos tienen que volver al sistema de archivos, pero esta vez al nuevo lugar <tt>$toba_dir/proyectos/mi_proyecto/metadatos</tt>
</p>
<pre class="wiki">toba proyecto exportar -p 'mi_proyecto'
</pre><p>
Repetir este paso para cada proyecto.
</p>
<h3 id="a5.Regenerartodalainstancia">5. Regenerar toda la instancia</h3>
<p>
Se necesita cargar el nuevo nucleo de toba y el nuevo administrador:
</p>
<pre class="wiki">toba instancia regenerar
</pre><h2 id="ModificacionesenlaAPI">Modificaciones en la API</h2>
<ul><li>La función ddrivetip está obsoleta y no se incluye por defecto, para utilizarla hacer un js::cargar_consumo_global(array('tooltips')), en su lugar se incluye una más potente (reescrita en base a una similar) llamada dhtml_tooltip.
</li><li>Desde el ci ya no se recomienda acceder más a las dependencias con $this-&gt;dependendencias[$id], sino con $this-&gt;dependencia($id), esto permite una carga 'a demanda' de un objeto.
</li><li>La clase "manejador_archivos" era el metodo viejo de hacer UPLOADs. La funcionalidad de esa clase se paso a "manejador_upload_archivos"
</li></ul><h2 id="NuevosRequisitos">Nuevos Requisitos</h2>
<ul><li>Se necesita tener el cliente de línea de comandos de SVN (svn.exe para windows) en el path del sistema. Esto es porque la nueva exportación cuando se borra algún componente necesita borrar el archivo de ese componente y por ende lo intenta borrar del repositorio también (desde ya queda a desición del desarrollador hacer un commit y subir el cambio).
</li></ul></div>
   </div>
   
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../../external.html?link=https://localhost/trac/toba/wiki/Versiones/Migracion0.9.0?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../../external.html?link=https://localhost/trac/toba/about"><strong>Trac 0.10.3</strong></a><br />
  By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>


<script type='text/javascript'>
if (document.getElementById('link_php')) {
document.getElementById('link_php').onclick = function() {
    location.href = '../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api/index.html';
    return false;
}
document.getElementById('link_js').onclick = function() {
    location.href = '../../../../external.html?link=https://localhost/toba_editor_trunk/doc/api_js/index.html';
    return false;
}
document.getElementById('link_wiki').onclick = function() {
    location.href = '../Referencia.html';
    return false;
}
}

</script>
 </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>

