<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="../../../../external.html?link=http://www.w3.org/1999/xhtml">
  
  

  


  

  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
    <title>
      Versiones/Migracion_desde_0.9.1 – SIU-Toba
    </title>
        <link rel="search" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Versiones/Migracion_desde_0.9.1?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="up" href="../Versiones.html" title="View parent page" />
        <link rel="start" href="../../wiki.html" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../external.html?link=https://repositorio.siu.edu.ar/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search/opensearch" title="Search SIU-Toba" />
    <script type="text/javascript" src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/jquery.js"></script><script type="text/javascript" src="../../chrome/common/js/trac.js"></script><script type="text/javascript" src="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/chrome/common/js/search.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/toba/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor("Link to this section");
      });
    </script>
    <script type="text/javascript" src="../../chrome/site/mootools.js"></script>
    <script type="text/javascript" src="../../chrome/site/slimbox.js"></script>
    <link rel="stylesheet" href="../../chrome/site/portada.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../chrome/site/slimbox.css" type="text/css" media="screen" />
    <a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a>
    <link rel="stylesheet" type="text/css" href="../../chrome/site/style.css" />
  </head>
  
			<body>
			<table border='0' cellspacing='0' cellpadding='0' height='48' width='100%'>
			  <tr>
			
				<td class='header-top-left'><img src='../../../../../api/media/logo.png' border='0'/></td>
			    <td class='header-top-right'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/wiki.png' />
			    	<a href='../../../../../api/index.html'  title='Navegar hacia la documentación PHP'>
			    		<img border='0' style='vertical-align: middle' src='../../../../../api/media/php-small.png' /></a> 
			    	<a href='../../../../../api_js/index.html'  title='Navegar hacia la documentación Javascript'>    		
			    	<img border='0' style='vertical-align: middle' src='../../../../../api/media/javascript-small.png' /></a>
			  </tr>
			
			  <tr>
			    <td colspan='2' class='header-menu'>
			  		  [ <a href='http://repositorio.siu.edu.ar/trac/toba/wiki/Versiones/Migracion_desde_0.9' title='El sitio online contiene contenidos mas detallados y actualizados'
						class='menu'>Ver online</a> ]
			    </td>
			
			  </tr>
			  <tr><td colspan='2' class='header-line'><img src='../../../../../api/media/empty.png' width='1' height='1' border='0' alt=''  /></td></tr>
			</table>
		
<a style="position: absolute; top: 5px; left:5px;border-bottom:none !important;" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu_original.gif" width="282" height="90" alt="SIU-Toba" /></a>
    <div id="siteheader">
    </div>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba"><img src="../../chrome/site/logo_toba_siu.gif" alt="Toba" height="90" width="282" /></a>
      </div>
      <form id="search" action="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../TracGuide.html">Help/Guide</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about">About Trac</a></li><li class="last"><a href="../../prefs.html">Preferences</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../../wiki.html">Wiki</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/timeline">Timeline</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/roadmap">Roadmap</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/query">View Tickets</a></li><li class="last"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/search">Search</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><a href="../Versiones.html">Up</a></li><li><a href="../WikiStart.html">Start Page</a> / <a href="../Versiones.html">Versiones</a> / Migracion_desde_0.9.1</li><li><a href="../TitleIndex.html">Index</a></li><li><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Versiones/Migracion_desde_0.9.1?action=history">History</a></li><li class="last"><a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Versiones/Migracion_desde_0.9.1?action=diff&amp;version=14">Last Change</a></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <p class="path noprint">
        <a class="pathentry" title="View Versiones" href="../Versiones.html">Versiones</a><span class="pathentry sep">/</span><a class="pathentry" title="View Versiones/Migracion_desde_0.9.1" href="Migracion_desde_0.9.html">Migracion_desde_0.9.1</a>
        <br style="clear: both" />
      </p>
      <div class="wikipage searchable">
        
          <h1 id="PasosparaMigracióndesdeToba0.9.1">Pasos para Migración desde Toba 0.9.1</h1>
<p>
La migración se va a encarar haciendo un checkout completo de un Toba 1.0.4 (tambien se puede hacer con un switch de una instalación 0.9.1 pero es mas propenso a errores).
</p>
<p>
Los siguientes pasos se basan en la forma típica de migrar entre versiones toba, más las particularidades de:
</p>
<ul><li><a class="wiki" href="Migracion1.0.html">Migración 1.0.0</a>
</li><li><a class="wiki" href="1.0-3.html#Migraci%C3%B3nManual">Migración 1.0.2</a>
</li><li><a class="wiki" href="1.0-5.html#Migraci%C3%B3nManual">Migración 1.0.4</a>
</li></ul><h2 id="Migracióndemetadatos">Migración de metadatos</h2>
<ol><li>Tener una instancia toba version 0.9.1 con el proyecto a migrar cargado
</li><li>Exportar el proyecto y backupearlo
</li><li>Hacer un checkout de la versión nueva de toba (asumimos 1.0.4). Crear el entorno necesario para ejecutar el comando <tt>toba</tt> de esta versión.
</li><li>Copiar el directorio <tt>instalacion</tt> del directorio 0.9.1 hacia el 1.0.4
</li><li>Asegurarse que los proyectos vinculados a la instancia sigan existiendo. Por ejemplo lo que antes se conocia como proyecto <tt>referencia</tt> a secas ahora es <tt>toba_referencia</tt>. Idealmente solo dejar en la instancia al toba_editor y al proyecto a migrar.
</li><li>Asegurarse que la version de la instancia a migrar sea la 0.9.1. Si no llega a ser la 0.9.1 editar este valor en el archivo <tt>instalacion/i__desarrollo/global/datos.sql</tt> registro <tt>apex_instancia</tt>. La versión de la instancia se verifica con el comando
<pre class="wiki">toba instancia info
</pre></li><li>En el entorno de la 1.0.4 ejecutar:
<pre class="wiki">toba instalacion migrar
</pre></li><li>Si algo va mal y quereremos arrancar el proceso nuevamente vamos al entorno de la 0.9.1 y ejecutamos <tt>toba instancia regenerar</tt> y volvemos a ejecutar la migracion desde la 1.0.4
</li><li>Una vez terminada la migración el log de lo sucedido se encuentra en <tt>$toba_dir/instalacion/logs_consola/comandos.log</tt>. <strong>Copiar y guardar este archivo para poder revisar posteriormente que cosas no fueron migradas automáticamente</strong>
</li><li>Exportar el proyecto
<pre class="wiki">toba proyecto exportar -p miproyecto
</pre></li><li>Regenerar la instancia
<pre class="wiki">toba instancia regenerar
</pre></li></ol><h2 id="AccesoalEditor">Acceso al Editor</h2>
<p>
Para generar automáticamente el Alias del proyecto toba_editor ejecutar:
</p>
<pre class="wiki">toba proyecto cargar -p toba_editor
</pre><p>
Al hacer la migración se mantienen los usuarios de la instancia anterior, como el proyecto Editor es nuevo no hay permiso de acceso al mismo. Para permitir el ingreso del usuario toba por ejemplo, ejecutar:
</p>
<pre class="wiki">toba instancia editar_acceso -u toba
</pre><h2 id="Accesoalproyecto">Acceso al proyecto</h2>
<p>
La forma de invocar al núcleo desde el punto de acceso cambio desde la 1.0:
</p>
<div class="code"><pre><span class="cp">&lt;?php</span>
<span class="nb">define</span><span class="p">(</span><span class="s2">"apex_pa_proyecto"</span><span class="p">,</span><span class="s1">'toba_referencia'</span><span class="p">);</span>

<span class="c1">//--------------------------------------------------------------------------
//------ Invocacion del nucleo del toba ------------------------------------
//--------------------------------------------------------------------------
</span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'TOBA_DIR'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$dir</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'TOBA_DIR'</span><span class="p">]</span><span class="o">.</span><span class="s2">"/php"</span><span class="p">;</span> 
    <span class="nv">$separador</span> <span class="o">=</span> <span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="k">PHP_OS</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'WIN'</span><span class="p">)</span> <span class="o">?</span> <span class="s2">";.;"</span> <span class="o">:</span> <span class="s2">":.:"</span><span class="p">;</span>
    <span class="nb">ini_set</span><span class="p">(</span><span class="s2">"include_path"</span><span class="p">,</span> <span class="nb">ini_get</span><span class="p">(</span><span class="s2">"include_path"</span><span class="p">)</span><span class="o">.</span> <span class="nv">$separador</span> <span class="o">.</span> <span class="nv">$dir</span><span class="p">);</span>
    <span class="nb">define</span><span class="p">(</span><span class="s2">"apex_pa_ID"</span><span class="p">,</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'PHP_SELF'</span><span class="p">]);</span>
    <span class="k">require_once</span><span class="p">(</span><span class="s2">"nucleo/toba_nucleo.php"</span><span class="p">);</span>
    <span class="nx">toba_nucleo</span><span class="o">::</span><span class="na">instancia</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">acceso_web</span><span class="p">();</span>     
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s2">"Es necesario definir la variable 'TOBA_DIR' en el archivo de configuracion de apache
            (Utilize la directiva 'SetEnv')"</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">//--------------------------------------------------------------------------
</span><span class="cp">?&gt;</span><span class="x">
</span></pre></div><p>
También es necesario definirle un nuevo item de login al proyecto, para eso ejecutar:
</p>
<pre class="wiki">toba proyecto actualizar_login -p miproyecto
</pre>
        
        
      </div>
    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("../../pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/wiki/Versiones/Migracion_desde_0.9.1?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="../../../../external.html?link=http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../../../../external.html?link=https://repositorio.siu.edu.ar/trac/toba/about"><strong>Trac 0.11.7</strong></a><br />
        By <a href="../../../../external.html?link=http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Creado por SIU<br /><a href="../../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a></p>
    </div>
    <div id="sitefooter">
    </div>
<script type="text/javascript">
if (document.getElementById('link_php')) {
document.getElementById('link_php').onclick = function() {
    location.href = '../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api/index.html';
    return false;
}
document.getElementById('link_js').onclick = function() {
    location.href = '../../../../external.html?link=http://desarrollos.siu.edu.ar/toba_editor_trunk/doc/api_js/index.html';
    return false;
}
document.getElementById('link_wiki').onclick = function() {
    location.href = '../Referencia.html';
    return false;
}
}
</script>
  </body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>