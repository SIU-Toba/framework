<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
 <title>MesaDeEntradas - SIU-Toba - Trac</title><link rel="start" href="../wiki.html" /><link rel="search" href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/search" /><link rel="help" href="TracGuide.html" /><link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="icon" href="../../../external.html?link=https://desarrollos2.siu.edu.ar/favicon.ico" type="image/x-icon" /><link rel="shortcut icon" href="../../../external.html?link=https://desarrollos2.siu.edu.ar/favicon.ico" type="image/x-icon" /><link rel="alternate" href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/MesaDeEntradas?format=txt" title="Plain Text" type="text/plain" /><style type="text/css">
.wikipage h2 {border-bottom: 1px solid gray;}
</style>
 <script type="text/javascript" src="../chrome/common/js/trac.js"></script>
</head>
<body>


<div id="banner">

<div id="header"><a id="logo" href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba"><img src="../chrome/site/logo_toba_siu.gif" width="282" height="90" alt="Toba" /></a><hr /></div>

<form id="search" action="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input type="text" id="proj-search" name="q" size="10" accesskey="f" value="" />
  <input type="submit" value="Search" />
  <input type="hidden" name="wiki" value="on" />
  <input type="hidden" name="changeset" value="on" />
  <input type="hidden" name="ticket" value="on" />
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/login">Login</a></li><li><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/settings">Settings</a></li><li><a href="TracGuide.html" accesskey="6">Help/Guide</a></li><li class="last"><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/about" accesskey="9">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a href="../wiki.html" accesskey="1">Wiki</a></li><li><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/timeline" accesskey="2">Timeline</a></li><li><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/roadmap" accesskey="3">Roadmap</a></li><li><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/browser">Browse Source</a></li><li><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/report">View Tickets</a></li><li class="last"><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/search" accesskey="4">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
  <li><a href="../wiki.html">Start Page</a></li>
  <li><a href="TitleIndex.html">Title Index</a></li>
  <li><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/RecentChanges">Recent Changes</a></li>
  
   <li class="last"><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/MesaDeEntradas?action=history">Page History</a></li>
  
 </ul>
 <hr />
</div>

<div id="content" class="wiki">

 
  
  
   <div class="wikipage">
    <div id="searchable"><p>
<a href="WikiStart.html">Inicio</a> / MesaDeEntradas
</p>
<h1 id="MesadeEntradas">Mesa de Entradas</h1>
<p>
Agregar libremente dudas, comentarios, inquietudes o mejoras.
</p>
<hr />
<h2 id="Deshabilitacióndeefs">Deshabilitación de efs</h2>
<ul><li>Estaría muy bueno que en el ei_formulario se agregara un método ocultar_efs($efs=null), similar al deshabilitar_efs($efs=null) que ya existe. Probablemente esto implicaría tener que definir en el ef el método establecer_oculto(), similar a establecer_solo_lectura().
</li><li>Además, el formulario debería leer este estado del ef antes de construir la interface. ¿Sería necesario que el ef puede mostrarse posteriormente usando JS? o directamente no se incluye en el HTML que se genera.
</li></ul><h2 id="ExportaciónaPDF">Exportación a PDF</h2>
<ul><li>Queremos personalizar la forma en la que se generan los pdf a partir de un cuadro. Especializamos la clase objeto_cuadro y redefinimos los métodos procesar_pdf(), procesar_propiedades_pdf() y obtener_pdf(), pero nos encontramos con que el generador de pdf (/toba/php/acciones/basicas/generador_pdf) llama al obtener_pdf de un cuadro que crea ahí adentro, con lo cual los métodos redefinidos nunca se invocan. Cuál es la forma correcta de personalizar la exportación a pdf?
</li></ul><h2 id="DocumentacióndeToba">Documentación de Toba</h2>
<ul><li>Resultaría muy útil contar con un API para las distintas clases (o al menos las mas importantes), para tener una ayuda visual un poco mas agradable que visualizar directamente el código y de esta forma, poder encontrar mas fácilmente los distintos métodos o propiedades necesarias a la hora de extender una clase para agregar un comportamiento específico.
</li><li>Hay una infraestructura que soporta esto con un formato similar al javadoc, el problema es que hay poco documentado con esta sintaxis, y lo poco que hay está desactualizado. Estaría bueno documentar al menos la interface más común de los objetos más utilizados. <a class="wiki" href="Desarrollo/Autodocumentacion.html">Más de este tema</a>.
</li></ul><h2 id="ABMsenlaarquitecturaporcapas">ABMs en la arquitectura por capas</h2>
<ul><li>P: Hola, estamos haciendo un ABM usando como ejemplo el que está en el proyecto de referencia y tenemos algunas preguntitas:
<ol><li>El patrón del ítem tiene que ser "CI - Creador de DB"? Por qué no se usa el CI común
</li><li>Para el acceso a los datos, se usa el DAO sólo para los get y el DBR para los set?
</li><li>Para crear un DBR hay un script de consola, nos pueden decir cúal es?
</li></ol></li></ul><blockquote>
<blockquote>
<p>
Muchas gracias!
</p>
</blockquote>
</blockquote>
<ul><li>R: Hola, acá van las respuestas a sus preguntas:
<ol><li>Se utilizaba ese patrón, porque si la BD usada en este ejemplo no existía, este patrón la creaba. De esta forma, se facilitaba la instalación del proyecto creando el ejemplo y los datos que utilizaba el mismo automáticamente.
De todas formas, hay una nueva versión disponible del proyecto, en la cuál se utiliza un patrón CI y la creación de la BD se realiza en el archivo "inicializacion.php". El problema, era que al estar el código ubicado en el patrón "CI - Creador de DB", la BD no se creaba hasta ejecutar el item que usaba este patrón mostrando mensajes de Warnings en los objetos previamente ejecutados.
</li><li>Si, esto es así porque para este caso particular el cuadro necesita datos de solo lectura y el dbr está pensado para modificaciones. Además, en el DAO se pueden personalizar los gets tanto como se deseen, mientras que en el dbr, habría que redefinir los métodos y esta no es justamente la idea por la que se creó este objeto.
</li><li><a class="wiki" href="Referencia/ScriptsAdministrativos/GeneracionDBR.html">Ver script para generar db_registro</a>
</li></ol></li></ul><p>
Espectacular! Muchas gracias!! Ignacio
</p>
<h2 id="Consultarfuente">Consultar fuente</h2>
<ul><li>P: El archivo db.php en php/nucleo/lib, tiene la función consultar_fuente.  Porqué devuelve como resultado un array en lugar del recordset?  Se podría hacer una función con esta característica?
</li><li>R: La idea era no desparramar logica de ADOdb por todos lados, para no hacernos dependientes de esa libreria (En general con un array se puede hacer lo mismo que con un recordset). La idea seria tener via libre para utilizar <a class="wiki" href="Desarrollo/PDO.html">PDO</a>. La funcion podria hacerse pero deberia ser especifica del proyecto que la necesite.
</li></ul><h2 id="Usodelef_combo_dao">Uso del ef_combo_dao</h2>
<ul><li>P: Hola, les hago una pregunta sobre el uso del ef combo_dao. Dentro de un ei tengo un ef del tipo ef_combo_dao (les adjunto una captura de pantalla con la definición). El método que tiene que ejecutar se llama versiones() y lo busca dentro de la extensión del ci.
</li></ul><blockquote>
<blockquote>
<p>
function versiones() {
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>
return array("hola", "chau");
</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
}
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
El problema es que cuando despliego el combo, las opciones que me muestra son "h" y "c" (sólo las primeras letras de cada palabra). Me podrían decir qué debe retornar el método que carga el combo? Muchas gracias. Ignacio
</p>
</blockquote>
<ul><li>R: El combo_dao espera un estructura tipo recordset, una matriz de registros por columna del tipo:
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">array(
        array(</span><span class="code-string">'clave' </span><span class="code-keyword">=&gt; </span><span class="code-lang">1</span><span class="code-keyword">, </span><span class="code-string">'valor' </span><span class="code-keyword">=&gt; </span><span class="code-string">'hola'</span><span class="code-keyword">),
        array(</span><span class="code-string">'clave' </span><span class="code-keyword">=&gt; </span><span class="code-lang">2</span><span class="code-keyword">, </span><span class="code-string">'valor' </span><span class="code-keyword">=&gt; </span><span class="code-string">'chau'</span><span class="code-keyword">)
    );
</span><span class="code-lang">?&gt;
</span></span>
</pre></div></li></ul><p>
Es necesario definir en los parametros cual es la columna <i>clave</i>  y cual es la <i>valor</i> (así se llaman los parametros).
En el proyecto referencia, hay un item en la carpeta <i>efs</i>  que se llama <i>dependencias</i> que tiene tres combos dao, capaz te sirven para ver como están implementados.
</p>
<h2 id="Personalizaciondeestilos">Personalizacion de estilos</h2>
<ul><li>P: Tengo algunos objetos dentro de un CI (form, browse, filtro) que quiero que se muestren centrados dentro del CI (ahora estan alineados a la izquiera); donde tengo que modificar en la hoja de estilos de mi proyecto para lograr que se muestren centrados? La clase 'objeto-base', dentro de la cual se dibujan los objetos, ya tiene especificado 'align: center;'.
</li><li>R: La clase a modificar depende del tipo de navegación del CI (cambiar la propiedad text-align a center):
<ul><li>Tabs horizontales o Wizard: tabs-contenedor
</li><li>Tabs verticales: tabs-v-contenedor
</li><li>Definida por la subclase (ad-hoc): ci-cuerpo
</li></ul></li></ul><p>
  
</p>
<h2 id="DeshabilitacióndeefsconJS">Deshabilitación de efs con JS</h2>
<ul><li>P: Hay alguna forma de setear como (no) obligatorio un ef a través de los métodos Javascript del objeto formulario que lo contiene?
</li><li>R: No, incluso si la hubiera no podrías desactivar la validación en el server. Lo que te conviene es ponerlo como no obligatorio en la definición, y hacerle las validaciones en js y php segun la lógica.
</li></ul><h2 id="Dosobjeto_datos_tablaenunmismoCI">Dos objeto_datos_tabla en un mismo CI</h2>
<ul><li>P: Puedo tener dentro de un CI 2 objetos del tipo datos_tabla (cada uno con su método get_tabla())? Lo que pasa es que dentro del mismo CI tengo 2 form, cada uno actualizando una tabla, pero como no me importa la relación entre esas tablas no usé un objeto_datos_relación (y el problema es que cuando quiero actualizar datos sobre el 2do. objeto de persistencia, no hace nada). Muchas gracias! Ignacio
</li><li>R: Sí, podes tenerlo. Lo probe con un par de tablas (a y b), el código rápido es así:
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">function </span><span class="code-lang">evt__procesar</span><span class="code-keyword">()
    {
        </span><span class="code-lang">$a </span><span class="code-keyword">= </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dependencia</span><span class="code-keyword">(</span><span class="code-string">'a'</span><span class="code-keyword">);
        </span><span class="code-lang">$b </span><span class="code-keyword">= </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dependencia</span><span class="code-keyword">(</span><span class="code-string">'b'</span><span class="code-keyword">);

        </span><span class="code-lang">$a</span><span class="code-keyword">-&gt;</span><span class="code-lang">set</span><span class="code-keyword">(array(</span><span class="code-string">"descripcion" </span><span class="code-keyword">=&gt; </span><span class="code-string">'hola A'</span><span class="code-keyword">));
        </span><span class="code-lang">$b</span><span class="code-keyword">-&gt;</span><span class="code-lang">set</span><span class="code-keyword">(array(</span><span class="code-string">"descripcion" </span><span class="code-keyword">=&gt; </span><span class="code-string">'hola B'</span><span class="code-keyword">));
        
        </span><span class="code-lang">$a</span><span class="code-keyword">-&gt;</span><span class="code-lang">sincronizar</span><span class="code-keyword">();
        </span><span class="code-lang">$b</span><span class="code-keyword">-&gt;</span><span class="code-lang">sincronizar</span><span class="code-keyword">();        
    }
</span><span class="code-lang">?&gt;
</span></span>
</pre></div></li></ul><p>
¿Que es el get_tabla al que te referís?
</p>
<p>
En el CI tengo un método para hacer referencia siempre a la misma tabla (en este caso, uno por tabla)
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
    </span><span class="code-keyword">protected function </span><span class="code-lang">get_tabla</span><span class="code-keyword">() {
        </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">tabla </span><span class="code-keyword">= </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">dependencia</span><span class="code-keyword">(</span><span class="code-string">"persistencia"</span><span class="code-keyword">);            
        return </span><span class="code-lang">$this</span><span class="code-keyword">-&gt;</span><span class="code-lang">tabla</span><span class="code-keyword">;        
    }
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><p>
donde "persistencia" es el nombre con el que está asociado el objeto_datos_tabla al CI. Después, para interactuar con la tabla hago:
</p>
<div class="code"><pre><span class="code-lang">&lt;?php
        $this</span><span class="code-keyword">-&gt;</span><span class="code-lang">get_tabla</span><span class="code-keyword">()-&gt;</span><span class="code-lang">sincronizar</span><span class="code-keyword">();
</span><span class="code-lang">?&gt;
</span></span>
</pre></div><p>
Igual, detecté que el problema lo tenía yo! Muchísimas gracias por la info y perdón por la molestia!!!
</p>
<h2 id="Informacióndelafuentededatos">Información de la fuente de datos</h2>
<ul><li>P: A qué clase/objeto le puedo preguntar cuál es el motor de base de datos al que estoy conectado? (a veces me conecto a Postgres y otras a Informix, cambiando desde el archivo de instancias, pero como algunas consultas son distintas dependiendo del motor, tengo que preguntar si es una o la otra). Muchas gracias!!
</li><li>R: En la version del trunk de toba hay una clase dba con un método estático parametros_instancia($instancia), retorna un arreglo con parametros entre ellos <i>motor</i>, que es el que necesitas. ¿Que versión de toba estás usando?
</li></ul><h2 id="EFPopup">EF Popup</h2>
<ul><li>P: Los campos de tipo ef_popup se pueden utilizar en los ei_formulario de la misma manera que se usaban en los objetos viejos? Hay algún ejemplo - en el proyecto de referencia o en toba - de su uso? (o alguna documentación al respecto?) Muchas gracias!!
</li><li>R: Si, se utilizan de la misma manera, no hay documentación y el mejor ejemplo es el selector de archivo de subclases de los editores nuevos.
</li></ul><h2 id="Paginadodecuadros">Paginado de cuadros</h2>
<ul><li>P: Hay algún ejemplo de un método de carga de un cuadro (que tiene el paginado a cargo del CI) cuando el cuadro debe interactuar con un filtro? Muchas gracias.
</li><li>R: El filtro dispara el evento 'filtrar' (o el que se alla definido) y se deben guardar la info que manda en forma local en el CI, en el <i>carga</i> del cuadro se debe utilizar la información del cuadro para incidir en la SQL (o lo que tengan). El proceso es manual, en realidad el filtro no 'filtra' sino es sólo un componente gráfico que envia info de que se quiere filtrar.
</li></ul><h2 id="Multilínea">Multilínea</h2>
<ul><li>P: Entro con el ML vacío y agrego una fila (guarda el registro bien). Vuelvo a entrar  y borro el registro (lo borra bien). Cuando vuelvo a entrar y doy de alta una fila, tiene problemas en la inserción. El error que tira es 'MODIFICAR. No existe un registro con el INDICE indicado (0)'. Por lo que estuve viendo, trata de dar de alta la nueva fila (con clave 156001) y de baja una fila con índice 0 (que no existe). Cómo puedo hacer para solucionarlo? Muchas gracias.
</li><li>R: Envia a la lista el código y screenshots de los objetos que estas utilizando, tanto en el CI como en los objetos de persistencia que estas utilizando.
</li></ul><h2 id="CSSenlapáginadelogin">CSS en la página de login</h2>
<ul><li>P: Qué valor le tengo que poner a la constante apex_pa_estilo para que use como plantilla de estilos la que está definida en el proyecto y no la que están en Toba? Hoy la tengo definida así, pero si le pongo otra cosa, no anda. Muchas gracias!
<div class="code"><pre><span class="code-lang">&lt;?php
        define</span><span class="code-keyword">(</span><span class="code-string">"apex_pa_estilo"</span><span class="code-keyword">,</span><span class="code-string">"carina_a"</span><span class="code-keyword">);
</span><span class="code-lang">?&gt;
</span></span>
</pre></div></li><li>R: Para cambiar el estilo de un proyecto no se utiliza esa constante sino que se <a class="wiki" href="Referencia/Plantillas.html">cambia en el administrador</a>, la constante apex_pa_estilo sólo se utiliza en la pantalla de login.
</li><li>R: Si, lo que necesito es que la pantalla de login use la misma hoja de estilos que el proyecto (dentro del proyecto, en www/css/archivo.css tengo la hoja de estilos del proyecto).
</li><li>R: El cambio esta en el trunk y en el branch post_0.8.3.3
</li></ul></div>
   </div>
   
    <h3 id="tkt-changes-hdr">Attachments</h3>
    <ul class="tkt-chg-list"><li class="tkt-chg-change"><a href="../attachment/wiki/MesaDeEntradas/Screenshot.png">Screenshot.png</a> (16.5 kB) -<q>captura de la definición del ef_combo_dao</q>, added by ignacio on 08/24/05 10:33:18.</li>
    </ul>
  
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"));
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/wiki/MesaDeEntradas?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr />
 <a id="tracpowered" href="../../../external.html?link=http://trac.edgewall.com/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107"
   alt="Trac Powered"/></a>
 <p class="left">
  Powered by <a href="../../../external.html?link=https://desarrollos2.siu.edu.ar/trac/toba/about"><strong>Trac 0.9.2</strong></a><br />
  By <a href="../../../external.html?link=http://www.edgewall.com/">Edgewall Software</a>.
 </p>
 <p class="right">
  Creado por el Programa SIU<br /><a href="../../../external.html?link=http://www.siu.edu.ar/">http://www.siu.edu.ar</a>
 </p>
</div>



 </body>
</html>

